<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"/>
<title>Test results - PocIntegrationTest</title>
<link href="../css/base-style.css" rel="stylesheet" type="text/css"/>
<link href="../css/style.css" rel="stylesheet" type="text/css"/>
<script src="../js/report.js" type="text/javascript"></script>
</head>
<body>
<div id="content">
<h1>PocIntegrationTest</h1>
<div class="breadcrumbs">
<a href="../index.html">all</a> &gt; 
<a href="../packages/com.visp.gate_command.integration.html">com.visp.gate_command.integration</a> &gt; PocIntegrationTest</div>
<div id="summary">
<table>
<tr>
<td>
<div class="summaryGroup">
<table>
<tr>
<td>
<div class="infoBox" id="tests">
<div class="counter">3</div>
<p>tests</p>
</div>
</td>
<td>
<div class="infoBox" id="failures">
<div class="counter">0</div>
<p>failures</p>
</div>
</td>
<td>
<div class="infoBox" id="ignored">
<div class="counter">0</div>
<p>ignored</p>
</div>
</td>
<td>
<div class="infoBox" id="duration">
<div class="counter">0.909s</div>
<p>duration</p>
</div>
</td>
</tr>
</table>
</div>
</td>
<td>
<div class="infoBox success" id="successRate">
<div class="percent">100%</div>
<p>successful</p>
</div>
</td>
</tr>
</table>
</div>
<div id="tabs">
<ul class="tabLinks">
<li>
<a href="#tab0">Tests</a>
</li>
<li>
<a href="#tab1">Standard output</a>
</li>
</ul>
<div id="tab0" class="tab">
<h2>Tests</h2>
<table>
<thead>
<tr>
<th>Test</th>
<th>Duration</th>
<th>Result</th>
</tr>
</thead>
<tr>
<td class="success">testCreateAndGetPoc()</td>
<td class="success">0.230s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testPatchUpdate()</td>
<td class="success">0.297s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testRetrievePocByEntity()</td>
<td class="success">0.382s</td>
<td class="success">passed</td>
</tr>
</table>
</div>
<div id="tab1" class="tab">
<h2>Standard output</h2>
<span class="code">
<pre>2025-03-14 01:58:06,165 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.visp.gate_command.integration.PocIntegrationTest]: PocIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-03-14 01:58:06,165 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.visp.gate_command.GateCommandApplication for test class com.visp.gate_command.integration.PocIntegrationTest
01:58:06,173 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - Processing appender named [MASKED_CONSOLE]
01:58:06,173 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
01:58:06,174 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - BEWARE: Writing to the console can be very slow. Avoid logging to the 
01:58:06,174 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - console in production environments, especially in high volume systems.
01:58:06,174 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - See also https://logback.qos.ch/codes.html#slowConsole
01:58:06,174 |-WARN in ch.qos.logback.core.model.processor.AppenderModelHandler - Appender named [JSON_CONSOLE] not referenced. Skipping further processing.
01:58:06,174 |-INFO in ch.qos.logback.classic.model.processor.RootLoggerModelHandler - Setting level of ROOT logger to INFO
01:58:06,174 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@be358d9 - Propagating INFO level on Logger[ROOT] onto the JUL framework
01:58:06,174 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [MASKED_CONSOLE] to Logger[ROOT]
01:58:06,174 |-INFO in ch.qos.logback.core.model.processor.DefaultProcessor@1766dff1 - End of configuration.
01:58:06,174 |-INFO in org.springframework.boot.logging.logback.SpringBootJoranConfigurator@76054eb6 - Registering current configuration as safe fallback point


  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.4.3)

2025-03-14 01:58:06,175 [Test worker] INFO  com.visp.gate_command.integration.PocIntegrationTest - Starting PocIntegrationTest using Java 21.0.6 with PID 102706 (started by emilio in /home/emilio/repos/gate-command)
2025-03-14 01:58:06,175 [Test worker] DEBUG com.visp.gate_command.integration.PocIntegrationTest - Running with Spring Boot v3.4.3, Spring v6.2.3
2025-03-14 01:58:06,175 [Test worker] INFO  com.visp.gate_command.integration.PocIntegrationTest - The following 1 profile is active: &quot;intTest&quot;
2025-03-14 01:58:06,206 [Test worker] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-14 01:58:06,211 [Test worker] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 6 JPA repository interfaces.
2025-03-14 01:58:06,251 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 0 (http)
2025-03-14 01:58:06,252 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler [&quot;http-nio-auto-5&quot;]
2025-03-14 01:58:06,252 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-03-14 01:58:06,252 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.36]
2025-03-14 01:58:06,257 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-14 01:58:06,257 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 81 ms
2025-03-14 01:58:06,267 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Starting...
2025-03-14 01:58:06,269 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-6 - Added connection conn40: url=jdbc:h2:mem:testdb user=SA
2025-03-14 01:58:06,269 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Start completed.
2025-03-14 01:58:06,269 [Test worker] INFO  liquibase.database - Set default schema name to PUBLIC
2025-03-14 01:58:06,285 [Test worker] INFO  liquibase.changelog - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2025-03-14 01:58:06,286 [Test worker] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-03-14 01:58:06,292 [Test worker] INFO  liquibase.lockservice - Successfully acquired change log lock
2025-03-14 01:58:06,292 [Test worker] INFO  liquibase.command - Using deploymentId: 1928286292
2025-03-14 01:58:06,292 [Test worker] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-03-14 01:58:06,294 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-entities-table.xml::1::your-name
2025-03-14 01:58:06,295 [Test worker] INFO  liquibase.changelog - Table entities created
2025-03-14 01:58:06,295 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-entities-table.xml::1::your-name ran successfully in 1ms
2025-03-14 01:58:06,296 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-users-table.xml::2::your-name
2025-03-14 01:58:06,298 [Test worker] INFO  liquibase.changelog - Table users created
2025-03-14 01:58:06,298 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-users-table.xml::2::your-name ran successfully in 2ms
2025-03-14 01:58:06,298 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-vehicles-table.xml::3::your-name
2025-03-14 01:58:06,299 [Test worker] INFO  liquibase.changelog - Table vehicles created
2025-03-14 01:58:06,299 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-vehicles-table.xml::3::your-name ran successfully in 1ms
2025-03-14 01:58:06,300 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-visits-table.xml::4::your-name
2025-03-14 01:58:06,301 [Test worker] INFO  liquibase.changelog - Table visits created
2025-03-14 01:58:06,301 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-visits-table.xml::4::your-name ran successfully in 1ms
2025-03-14 01:58:06,302 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-pocs-table.xml::6::your-name
2025-03-14 01:58:06,303 [Test worker] INFO  liquibase.changelog - Table pocs created
2025-03-14 01:58:06,303 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-pocs-table.xml::6::your-name ran successfully in 1ms
2025-03-14 01:58:06,304 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-events-table.xml::7::your-name
2025-03-14 01:58:06,305 [Test worker] INFO  liquibase.changelog - Table events created
2025-03-14 01:58:06,305 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-events-table.xml::7::your-name ran successfully in 1ms
2025-03-14 01:58:06,305 [Test worker] INFO  liquibase.util - UPDATE SUMMARY
2025-03-14 01:58:06,305 [Test worker] INFO  liquibase.util - Run:                          6
2025-03-14 01:58:06,305 [Test worker] INFO  liquibase.util - Previously run:               0
2025-03-14 01:58:06,305 [Test worker] INFO  liquibase.util - Filtered out:                 0
2025-03-14 01:58:06,305 [Test worker] INFO  liquibase.util - -------------------------------
2025-03-14 01:58:06,305 [Test worker] INFO  liquibase.util - Total change sets:            6
2025-03-14 01:58:06,305 [Test worker] INFO  liquibase.util - Update summary generated
2025-03-14 01:58:06,306 [Test worker] INFO  liquibase.command - Update command completed successfully.
2025-03-14 01:58:06,306 [Test worker] INFO  liquibase.ui - Liquibase: Update has been successful. Rows affected: 6
2025-03-14 01:58:06,306 [Test worker] INFO  liquibase.lockservice - Successfully released change log lock
2025-03-14 01:58:06,306 [Test worker] INFO  liquibase.command - Command execution complete
2025-03-14 01:58:06,314 [Test worker] INFO  org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-14 01:58:06,314 [Test worker] INFO  org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-14 01:58:06,317 [Test worker] INFO  org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-14 01:58:06,318 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-14 01:58:06,318 [Test worker] INFO  org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-6)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-03-14 01:58:06,355 [Test worker] INFO  org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    drop table if exists entities cascade 
Hibernate: 
    drop table if exists events cascade 
Hibernate: 
    drop table if exists pocs cascade 
Hibernate: 
    drop table if exists users cascade 
Hibernate: 
    drop table if exists vehicles cascade 
Hibernate: 
    drop table if exists visits cascade 
Hibernate: 
    create table entities (
        active boolean not null,
        parking_hours_allowed integer not null,
        sync_interval_minutes integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_updated_at timestamp(6) not null,
        address varchar(255) not null,
        city varchar(255) not null,
        commune varchar(255) not null,
        contact_phone varchar(255) not null,
        name varchar(255) not null,
        region varchar(255) not null,
        tax_id varchar(255) not null,
        type varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table events (
        type tinyint not null check (type between 0 and 1),
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        poc_id bigint not null,
        plate varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table pocs (
        active boolean not null,
        type tinyint not null check (type between 0 and 1),
        created_at timestamp(6) not null,
        entity_id bigint not null,
        id bigint generated by default as identity,
        last_sync timestamp(6) not null,
        identifier varchar(255) not null unique,
        location varchar(255) not null,
        name varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table users (
        type tinyint not null check (type between 0 and 3),
        created_at timestamp(6) not null,
        entity_id bigint not null,
        id bigint generated by default as identity,
        document varchar(255) not null,
        email varchar(255) not null unique,
        last_name varchar(255) not null,
        name varchar(255) not null,
        password varchar(255) not null,
        phone_number varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table vehicles (
        vehicle_type tinyint not null check (vehicle_type between 0 and 1),
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        plate varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table visits (
        created_at timestamp(6) not null,
        expiration_date timestamp(6),
        id bigint generated by default as identity,
        resident_id bigint not null,
        last_name varchar(255) not null,
        name varchar(255) not null,
        vehicle_plate varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    alter table if exists events 
       add constraint FKn5eht9xulbljxwxl1cfrsxyh6 
       foreign key (poc_id) 
       references pocs
Hibernate: 
    alter table if exists pocs 
       add constraint FKcwolwrishvr7h658htihn5xbu 
       foreign key (entity_id) 
       references entities
Hibernate: 
    alter table if exists users 
       add constraint FKhb1q1fcncex0uvlxs3h7vjofc 
       foreign key (entity_id) 
       references entities
Hibernate: 
    alter table if exists vehicles 
       add constraint FKo4u5y92lt2sx8y2dc1bb9sewc 
       foreign key (user_id) 
       references users
Hibernate: 
    alter table if exists visits 
       add constraint FKrvlqg952n1dtjfgun4mr8velu 
       foreign key (resident_id) 
       references users
2025-03-14 01:58:06,362 [Test worker] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-14 01:58:06,395 [Test worker] WARN  org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-14 01:58:06,464 [Test worker] INFO  org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-03-14 01:58:06,568 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler [&quot;http-nio-auto-5&quot;]
2025-03-14 01:58:06,569 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 37533 (http) with context path '/'
2025-03-14 01:58:06,570 [Test worker] INFO  com.visp.gate_command.integration.PocIntegrationTest - Started PocIntegrationTest in 0.404 seconds (process running for 10.388)
2025-03-14 01:58:06,580 [http-nio-auto-5-exec-1] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-14 01:58:06,580 [http-nio-auto-5-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-14 01:58:06,581 [http-nio-auto-5-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-03-14 01:58:06,711 [http-nio-auto-5-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Entering EntityControllerImpl.save with arguments: [{&quot;id&quot;:null,&quot;name&quot;:&quot;name&quot;,&quot;type&quot;:&quot;type&quot;,&quot;*****&quot;:&quot;*****&quot;,&quot;region&quot;:&quot;region&quot;,&quot;city&quot;:&quot;city&quot;,&quot;commune&quot;:&quot;commune&quot;,&quot;taxId&quot;:&quot;*****&quot;,&quot;*****&quot;:&quot;*****&quot;,&quot;syncIntervalMinutes&quot;:5,&quot;parkingHoursAllowed&quot;:5,&quot;active&quot;:true,&quot;createdAt&quot;:null,&quot;lastUpdatedAt&quot;:null}]
2025-03-14 01:58:06,711 [http-nio-auto-5-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Entering EntityServiceImpl.create with arguments: [{&quot;id&quot;:null,&quot;name&quot;:&quot;name&quot;,&quot;type&quot;:&quot;type&quot;,&quot;*****&quot;:&quot;*****&quot;,&quot;region&quot;:&quot;region&quot;,&quot;city&quot;:&quot;city&quot;,&quot;commune&quot;:&quot;commune&quot;,&quot;taxId&quot;:&quot;*****&quot;,&quot;*****&quot;:&quot;*****&quot;,&quot;syncIntervalMinutes&quot;:5,&quot;parkingHoursAllowed&quot;:5,&quot;active&quot;:true,&quot;createdAt&quot;:null,&quot;lastUpdatedAt&quot;:null}]
Hibernate: 
    insert 
    into
        entities
        (active, address, city, commune, contact_phone, created_at, last_updated_at, name, parking_hours_allowed, region, sync_interval_minutes, tax_id, type, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-03-14 01:58:06,714 [http-nio-auto-5-exec-1] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log result for EntityServiceImpl.create
2025-03-14 01:58:06,715 [http-nio-auto-5-exec-1] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log result for EntityControllerImpl.save
2025-03-14 01:58:06,790 [http-nio-auto-5-exec-2] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log arguments for PocControllerImpl.create
2025-03-14 01:58:06,790 [http-nio-auto-5-exec-2] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log arguments for PocServiceImpl.create
Hibernate: 
    insert 
    into
        pocs
        (active, created_at, entity_id, identifier, last_sync, location, name, type, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-03-14 01:58:06,793 [http-nio-auto-5-exec-2] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log result for PocServiceImpl.create
2025-03-14 01:58:06,793 [http-nio-auto-5-exec-2] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log result for PocControllerImpl.create
2025-03-14 01:58:06,797 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-03-14 01:58:06,797 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler [&quot;http-nio-auto-5-37533&quot;]
2025-03-14 01:58:06,797 [tomcat-shutdown] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-03-14 01:58:06,798 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler [&quot;http-nio-auto-5&quot;]
2025-03-14 01:58:06,798 [Test worker] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
Hibernate: 
    drop table if exists entities cascade 
Hibernate: 
    drop table if exists events cascade 
Hibernate: 
    drop table if exists pocs cascade 
Hibernate: 
    drop table if exists users cascade 
Hibernate: 
    drop table if exists vehicles cascade 
Hibernate: 
    drop table if exists visits cascade 
2025-03-14 01:58:06,799 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown initiated...
2025-03-14 01:58:06,800 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-6 - Shutdown completed.
01:58:06,809 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - Processing appender named [MASKED_CONSOLE]
01:58:06,809 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
01:58:06,809 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - BEWARE: Writing to the console can be very slow. Avoid logging to the 
01:58:06,809 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - console in production environments, especially in high volume systems.
01:58:06,809 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - See also https://logback.qos.ch/codes.html#slowConsole
01:58:06,809 |-WARN in ch.qos.logback.core.model.processor.AppenderModelHandler - Appender named [JSON_CONSOLE] not referenced. Skipping further processing.
01:58:06,809 |-INFO in ch.qos.logback.classic.model.processor.RootLoggerModelHandler - Setting level of ROOT logger to INFO
01:58:06,809 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@422f36d0 - Propagating INFO level on Logger[ROOT] onto the JUL framework
01:58:06,809 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [MASKED_CONSOLE] to Logger[ROOT]
01:58:06,809 |-INFO in ch.qos.logback.core.model.processor.DefaultProcessor@1f6af5b3 - End of configuration.
01:58:06,809 |-INFO in org.springframework.boot.logging.logback.SpringBootJoranConfigurator@67cc3f95 - Registering current configuration as safe fallback point


  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.4.3)

2025-03-14 01:58:06,811 [Test worker] INFO  com.visp.gate_command.integration.PocIntegrationTest - Starting PocIntegrationTest using Java 21.0.6 with PID 102706 (started by emilio in /home/emilio/repos/gate-command)
2025-03-14 01:58:06,811 [Test worker] DEBUG com.visp.gate_command.integration.PocIntegrationTest - Running with Spring Boot v3.4.3, Spring v6.2.3
2025-03-14 01:58:06,811 [Test worker] INFO  com.visp.gate_command.integration.PocIntegrationTest - The following 1 profile is active: &quot;intTest&quot;
2025-03-14 01:58:06,842 [Test worker] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-14 01:58:06,846 [Test worker] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 6 JPA repository interfaces.
2025-03-14 01:58:06,884 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 0 (http)
2025-03-14 01:58:06,884 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler [&quot;http-nio-auto-6&quot;]
2025-03-14 01:58:06,884 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-03-14 01:58:06,884 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.36]
2025-03-14 01:58:06,889 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-14 01:58:06,889 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 78 ms
2025-03-14 01:58:06,900 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Starting...
2025-03-14 01:58:06,901 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-7 - Added connection conn50: url=jdbc:h2:mem:testdb user=SA
2025-03-14 01:58:06,901 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Start completed.
2025-03-14 01:58:06,901 [Test worker] INFO  liquibase.database - Set default schema name to PUBLIC
2025-03-14 01:58:06,919 [Test worker] INFO  liquibase.changelog - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2025-03-14 01:58:06,921 [Test worker] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-03-14 01:58:06,926 [Test worker] INFO  liquibase.lockservice - Successfully acquired change log lock
2025-03-14 01:58:06,926 [Test worker] INFO  liquibase.command - Using deploymentId: 1928286926
2025-03-14 01:58:06,926 [Test worker] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-03-14 01:58:06,928 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-entities-table.xml::1::your-name
2025-03-14 01:58:06,929 [Test worker] INFO  liquibase.changelog - Table entities created
2025-03-14 01:58:06,929 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-entities-table.xml::1::your-name ran successfully in 1ms
2025-03-14 01:58:06,930 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-users-table.xml::2::your-name
2025-03-14 01:58:06,931 [Test worker] INFO  liquibase.changelog - Table users created
2025-03-14 01:58:06,931 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-users-table.xml::2::your-name ran successfully in 1ms
2025-03-14 01:58:06,932 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-vehicles-table.xml::3::your-name
2025-03-14 01:58:06,933 [Test worker] INFO  liquibase.changelog - Table vehicles created
2025-03-14 01:58:06,933 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-vehicles-table.xml::3::your-name ran successfully in 1ms
2025-03-14 01:58:06,933 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-visits-table.xml::4::your-name
2025-03-14 01:58:06,934 [Test worker] INFO  liquibase.changelog - Table visits created
2025-03-14 01:58:06,934 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-visits-table.xml::4::your-name ran successfully in 0ms
2025-03-14 01:58:06,935 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-pocs-table.xml::6::your-name
2025-03-14 01:58:06,936 [Test worker] INFO  liquibase.changelog - Table pocs created
2025-03-14 01:58:06,936 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-pocs-table.xml::6::your-name ran successfully in 1ms
2025-03-14 01:58:06,937 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-events-table.xml::7::your-name
2025-03-14 01:58:06,937 [Test worker] INFO  liquibase.changelog - Table events created
2025-03-14 01:58:06,937 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-events-table.xml::7::your-name ran successfully in 0ms
2025-03-14 01:58:06,938 [Test worker] INFO  liquibase.util - UPDATE SUMMARY
2025-03-14 01:58:06,938 [Test worker] INFO  liquibase.util - Run:                          6
2025-03-14 01:58:06,938 [Test worker] INFO  liquibase.util - Previously run:               0
2025-03-14 01:58:06,938 [Test worker] INFO  liquibase.util - Filtered out:                 0
2025-03-14 01:58:06,938 [Test worker] INFO  liquibase.util - -------------------------------
2025-03-14 01:58:06,938 [Test worker] INFO  liquibase.util - Total change sets:            6
2025-03-14 01:58:06,938 [Test worker] INFO  liquibase.util - Update summary generated
2025-03-14 01:58:06,938 [Test worker] INFO  liquibase.command - Update command completed successfully.
2025-03-14 01:58:06,938 [Test worker] INFO  liquibase.ui - Liquibase: Update has been successful. Rows affected: 6
2025-03-14 01:58:06,939 [Test worker] INFO  liquibase.lockservice - Successfully released change log lock
2025-03-14 01:58:06,939 [Test worker] INFO  liquibase.command - Command execution complete
2025-03-14 01:58:06,946 [Test worker] INFO  org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-14 01:58:06,946 [Test worker] INFO  org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-14 01:58:06,949 [Test worker] INFO  org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-14 01:58:06,950 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-14 01:58:06,950 [Test worker] INFO  org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-7)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-03-14 01:58:06,987 [Test worker] INFO  org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    drop table if exists entities cascade 
Hibernate: 
    drop table if exists events cascade 
Hibernate: 
    drop table if exists pocs cascade 
Hibernate: 
    drop table if exists users cascade 
Hibernate: 
    drop table if exists vehicles cascade 
Hibernate: 
    drop table if exists visits cascade 
Hibernate: 
    create table entities (
        active boolean not null,
        parking_hours_allowed integer not null,
        sync_interval_minutes integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_updated_at timestamp(6) not null,
        address varchar(255) not null,
        city varchar(255) not null,
        commune varchar(255) not null,
        contact_phone varchar(255) not null,
        name varchar(255) not null,
        region varchar(255) not null,
        tax_id varchar(255) not null,
        type varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table events (
        type tinyint not null check (type between 0 and 1),
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        poc_id bigint not null,
        plate varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table pocs (
        active boolean not null,
        type tinyint not null check (type between 0 and 1),
        created_at timestamp(6) not null,
        entity_id bigint not null,
        id bigint generated by default as identity,
        last_sync timestamp(6) not null,
        identifier varchar(255) not null unique,
        location varchar(255) not null,
        name varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table users (
        type tinyint not null check (type between 0 and 3),
        created_at timestamp(6) not null,
        entity_id bigint not null,
        id bigint generated by default as identity,
        document varchar(255) not null,
        email varchar(255) not null unique,
        last_name varchar(255) not null,
        name varchar(255) not null,
        password varchar(255) not null,
        phone_number varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table vehicles (
        vehicle_type tinyint not null check (vehicle_type between 0 and 1),
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        plate varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table visits (
        created_at timestamp(6) not null,
        expiration_date timestamp(6),
        id bigint generated by default as identity,
        resident_id bigint not null,
        last_name varchar(255) not null,
        name varchar(255) not null,
        vehicle_plate varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    alter table if exists events 
       add constraint FKn5eht9xulbljxwxl1cfrsxyh6 
       foreign key (poc_id) 
       references pocs
Hibernate: 
    alter table if exists pocs 
       add constraint FKcwolwrishvr7h658htihn5xbu 
       foreign key (entity_id) 
       references entities
Hibernate: 
    alter table if exists users 
       add constraint FKhb1q1fcncex0uvlxs3h7vjofc 
       foreign key (entity_id) 
       references entities
Hibernate: 
    alter table if exists vehicles 
       add constraint FKo4u5y92lt2sx8y2dc1bb9sewc 
       foreign key (user_id) 
       references users
Hibernate: 
    alter table if exists visits 
       add constraint FKrvlqg952n1dtjfgun4mr8velu 
       foreign key (resident_id) 
       references users
2025-03-14 01:58:06,993 [Test worker] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-14 01:58:07,023 [Test worker] WARN  org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-14 01:58:07,092 [Test worker] INFO  org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-03-14 01:58:07,170 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler [&quot;http-nio-auto-6&quot;]
2025-03-14 01:58:07,171 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 33453 (http) with context path '/'
2025-03-14 01:58:07,172 [Test worker] INFO  com.visp.gate_command.integration.PocIntegrationTest - Started PocIntegrationTest in 0.37 seconds (process running for 10.99)
2025-03-14 01:58:07,180 [http-nio-auto-6-exec-1] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-14 01:58:07,180 [http-nio-auto-6-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-14 01:58:07,181 [http-nio-auto-6-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-03-14 01:58:07,310 [http-nio-auto-6-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Entering EntityControllerImpl.save with arguments: [{&quot;id&quot;:null,&quot;name&quot;:&quot;name&quot;,&quot;type&quot;:&quot;type&quot;,&quot;*****&quot;:&quot;*****&quot;,&quot;region&quot;:&quot;region&quot;,&quot;city&quot;:&quot;city&quot;,&quot;commune&quot;:&quot;commune&quot;,&quot;taxId&quot;:&quot;*****&quot;,&quot;*****&quot;:&quot;*****&quot;,&quot;syncIntervalMinutes&quot;:5,&quot;parkingHoursAllowed&quot;:5,&quot;active&quot;:true,&quot;createdAt&quot;:null,&quot;lastUpdatedAt&quot;:null}]
2025-03-14 01:58:07,310 [http-nio-auto-6-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Entering EntityServiceImpl.create with arguments: [{&quot;id&quot;:null,&quot;name&quot;:&quot;name&quot;,&quot;type&quot;:&quot;type&quot;,&quot;*****&quot;:&quot;*****&quot;,&quot;region&quot;:&quot;region&quot;,&quot;city&quot;:&quot;city&quot;,&quot;commune&quot;:&quot;commune&quot;,&quot;taxId&quot;:&quot;*****&quot;,&quot;*****&quot;:&quot;*****&quot;,&quot;syncIntervalMinutes&quot;:5,&quot;parkingHoursAllowed&quot;:5,&quot;active&quot;:true,&quot;createdAt&quot;:null,&quot;lastUpdatedAt&quot;:null}]
Hibernate: 
    insert 
    into
        entities
        (active, address, city, commune, contact_phone, created_at, last_updated_at, name, parking_hours_allowed, region, sync_interval_minutes, tax_id, type, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-03-14 01:58:07,313 [http-nio-auto-6-exec-1] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log result for EntityServiceImpl.create
2025-03-14 01:58:07,314 [http-nio-auto-6-exec-1] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log result for EntityControllerImpl.save
2025-03-14 01:58:07,387 [http-nio-auto-6-exec-2] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log arguments for PocControllerImpl.create
2025-03-14 01:58:07,387 [http-nio-auto-6-exec-2] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log arguments for PocServiceImpl.create
Hibernate: 
    insert 
    into
        pocs
        (active, created_at, entity_id, identifier, last_sync, location, name, type, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-03-14 01:58:07,389 [http-nio-auto-6-exec-2] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log result for PocServiceImpl.create
2025-03-14 01:58:07,389 [http-nio-auto-6-exec-2] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log result for PocControllerImpl.create
2025-03-14 01:58:07,457 [http-nio-auto-6-exec-3] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log arguments for PocControllerImpl.create
2025-03-14 01:58:07,457 [http-nio-auto-6-exec-3] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log arguments for PocServiceImpl.create
Hibernate: 
    insert 
    into
        pocs
        (active, created_at, entity_id, identifier, last_sync, location, name, type, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-03-14 01:58:07,458 [http-nio-auto-6-exec-3] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log result for PocServiceImpl.create
2025-03-14 01:58:07,459 [http-nio-auto-6-exec-3] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log result for PocControllerImpl.create
2025-03-14 01:58:07,527 [http-nio-auto-6-exec-4] INFO  com.visp.gate_command.aop.LoggingAspect - Entering PocControllerImpl.retrievePocByEntity with arguments: [1]
2025-03-14 01:58:07,527 [http-nio-auto-6-exec-4] INFO  com.visp.gate_command.aop.LoggingAspect - Entering PocServiceImpl.retrievePocByEntity with arguments: [1]
Hibernate: 
    select
        p1_0.id,
        p1_0.active,
        p1_0.created_at,
        p1_0.entity_id,
        p1_0.identifier,
        p1_0.last_sync,
        p1_0.location,
        p1_0.name,
        p1_0.type 
    from
        pocs p1_0 
    left join
        entities e1_0 
            on e1_0.id=p1_0.entity_id 
    where
        e1_0.id=?
Hibernate: 
    select
        e1_0.id,
        e1_0.active,
        e1_0.address,
        e1_0.city,
        e1_0.commune,
        e1_0.contact_phone,
        e1_0.created_at,
        e1_0.last_updated_at,
        e1_0.name,
        e1_0.parking_hours_allowed,
        e1_0.region,
        e1_0.sync_interval_minutes,
        e1_0.tax_id,
        e1_0.type 
    from
        entities e1_0 
    where
        e1_0.id=?
2025-03-14 01:58:07,546 [http-nio-auto-6-exec-4] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log result for PocServiceImpl.retrievePocByEntity
2025-03-14 01:58:07,546 [http-nio-auto-6-exec-4] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log result for PocControllerImpl.retrievePocByEntity
2025-03-14 01:58:07,550 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-03-14 01:58:07,550 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler [&quot;http-nio-auto-6-33453&quot;]
2025-03-14 01:58:07,551 [tomcat-shutdown] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-03-14 01:58:07,551 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler [&quot;http-nio-auto-6&quot;]
2025-03-14 01:58:07,552 [Test worker] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
Hibernate: 
    drop table if exists entities cascade 
Hibernate: 
    drop table if exists events cascade 
Hibernate: 
    drop table if exists pocs cascade 
Hibernate: 
    drop table if exists users cascade 
Hibernate: 
    drop table if exists vehicles cascade 
Hibernate: 
    drop table if exists visits cascade 
2025-03-14 01:58:07,553 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown initiated...
2025-03-14 01:58:07,553 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-7 - Shutdown completed.
01:58:07,563 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - Processing appender named [MASKED_CONSOLE]
01:58:07,563 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
01:58:07,563 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - BEWARE: Writing to the console can be very slow. Avoid logging to the 
01:58:07,563 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - console in production environments, especially in high volume systems.
01:58:07,563 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - See also https://logback.qos.ch/codes.html#slowConsole
01:58:07,563 |-WARN in ch.qos.logback.core.model.processor.AppenderModelHandler - Appender named [JSON_CONSOLE] not referenced. Skipping further processing.
01:58:07,563 |-INFO in ch.qos.logback.classic.model.processor.RootLoggerModelHandler - Setting level of ROOT logger to INFO
01:58:07,563 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@41bc122e - Propagating INFO level on Logger[ROOT] onto the JUL framework
01:58:07,563 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [MASKED_CONSOLE] to Logger[ROOT]
01:58:07,563 |-INFO in ch.qos.logback.core.model.processor.DefaultProcessor@7472623a - End of configuration.
01:58:07,563 |-INFO in org.springframework.boot.logging.logback.SpringBootJoranConfigurator@cfcb4e7 - Registering current configuration as safe fallback point


  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.4.3)

2025-03-14 01:58:07,565 [Test worker] INFO  com.visp.gate_command.integration.PocIntegrationTest - Starting PocIntegrationTest using Java 21.0.6 with PID 102706 (started by emilio in /home/emilio/repos/gate-command)
2025-03-14 01:58:07,565 [Test worker] DEBUG com.visp.gate_command.integration.PocIntegrationTest - Running with Spring Boot v3.4.3, Spring v6.2.3
2025-03-14 01:58:07,565 [Test worker] INFO  com.visp.gate_command.integration.PocIntegrationTest - The following 1 profile is active: &quot;intTest&quot;
2025-03-14 01:58:07,594 [Test worker] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-14 01:58:07,599 [Test worker] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 6 JPA repository interfaces.
2025-03-14 01:58:07,635 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 0 (http)
2025-03-14 01:58:07,635 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler [&quot;http-nio-auto-7&quot;]
2025-03-14 01:58:07,636 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-03-14 01:58:07,636 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.36]
2025-03-14 01:58:07,640 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-14 01:58:07,640 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 75 ms
2025-03-14 01:58:07,650 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Starting...
2025-03-14 01:58:07,651 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-8 - Added connection conn60: url=jdbc:h2:mem:testdb user=SA
2025-03-14 01:58:07,651 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Start completed.
2025-03-14 01:58:07,651 [Test worker] INFO  liquibase.database - Set default schema name to PUBLIC
2025-03-14 01:58:07,670 [Test worker] INFO  liquibase.changelog - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2025-03-14 01:58:07,673 [Test worker] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-03-14 01:58:07,679 [Test worker] INFO  liquibase.lockservice - Successfully acquired change log lock
2025-03-14 01:58:07,679 [Test worker] INFO  liquibase.command - Using deploymentId: 1928287679
2025-03-14 01:58:07,680 [Test worker] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-03-14 01:58:07,683 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-entities-table.xml::1::your-name
2025-03-14 01:58:07,684 [Test worker] INFO  liquibase.changelog - Table entities created
2025-03-14 01:58:07,684 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-entities-table.xml::1::your-name ran successfully in 1ms
2025-03-14 01:58:07,685 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-users-table.xml::2::your-name
2025-03-14 01:58:07,687 [Test worker] INFO  liquibase.changelog - Table users created
2025-03-14 01:58:07,687 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-users-table.xml::2::your-name ran successfully in 2ms
2025-03-14 01:58:07,688 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-vehicles-table.xml::3::your-name
2025-03-14 01:58:07,689 [Test worker] INFO  liquibase.changelog - Table vehicles created
2025-03-14 01:58:07,689 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-vehicles-table.xml::3::your-name ran successfully in 1ms
2025-03-14 01:58:07,690 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-visits-table.xml::4::your-name
2025-03-14 01:58:07,691 [Test worker] INFO  liquibase.changelog - Table visits created
2025-03-14 01:58:07,691 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-visits-table.xml::4::your-name ran successfully in 1ms
2025-03-14 01:58:07,692 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-pocs-table.xml::6::your-name
2025-03-14 01:58:07,693 [Test worker] INFO  liquibase.changelog - Table pocs created
2025-03-14 01:58:07,693 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-pocs-table.xml::6::your-name ran successfully in 1ms
2025-03-14 01:58:07,694 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-events-table.xml::7::your-name
2025-03-14 01:58:07,695 [Test worker] INFO  liquibase.changelog - Table events created
2025-03-14 01:58:07,695 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-events-table.xml::7::your-name ran successfully in 1ms
2025-03-14 01:58:07,710 [Test worker] INFO  liquibase.util - UPDATE SUMMARY
2025-03-14 01:58:07,710 [Test worker] INFO  liquibase.util - Run:                          6
2025-03-14 01:58:07,710 [Test worker] INFO  liquibase.util - Previously run:               0
2025-03-14 01:58:07,710 [Test worker] INFO  liquibase.util - Filtered out:                 0
2025-03-14 01:58:07,710 [Test worker] INFO  liquibase.util - -------------------------------
2025-03-14 01:58:07,710 [Test worker] INFO  liquibase.util - Total change sets:            6
2025-03-14 01:58:07,710 [Test worker] INFO  liquibase.util - Update summary generated
2025-03-14 01:58:07,711 [Test worker] INFO  liquibase.command - Update command completed successfully.
2025-03-14 01:58:07,711 [Test worker] INFO  liquibase.ui - Liquibase: Update has been successful. Rows affected: 6
2025-03-14 01:58:07,712 [Test worker] INFO  liquibase.lockservice - Successfully released change log lock
2025-03-14 01:58:07,712 [Test worker] INFO  liquibase.command - Command execution complete
2025-03-14 01:58:07,724 [Test worker] INFO  org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-14 01:58:07,725 [Test worker] INFO  org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-14 01:58:07,728 [Test worker] INFO  org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-14 01:58:07,729 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-14 01:58:07,729 [Test worker] INFO  org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-8)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-03-14 01:58:07,765 [Test worker] INFO  org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    drop table if exists entities cascade 
Hibernate: 
    drop table if exists events cascade 
Hibernate: 
    drop table if exists pocs cascade 
Hibernate: 
    drop table if exists users cascade 
Hibernate: 
    drop table if exists vehicles cascade 
Hibernate: 
    drop table if exists visits cascade 
Hibernate: 
    create table entities (
        active boolean not null,
        parking_hours_allowed integer not null,
        sync_interval_minutes integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_updated_at timestamp(6) not null,
        address varchar(255) not null,
        city varchar(255) not null,
        commune varchar(255) not null,
        contact_phone varchar(255) not null,
        name varchar(255) not null,
        region varchar(255) not null,
        tax_id varchar(255) not null,
        type varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table events (
        type tinyint not null check (type between 0 and 1),
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        poc_id bigint not null,
        plate varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table pocs (
        active boolean not null,
        type tinyint not null check (type between 0 and 1),
        created_at timestamp(6) not null,
        entity_id bigint not null,
        id bigint generated by default as identity,
        last_sync timestamp(6) not null,
        identifier varchar(255) not null unique,
        location varchar(255) not null,
        name varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table users (
        type tinyint not null check (type between 0 and 3),
        created_at timestamp(6) not null,
        entity_id bigint not null,
        id bigint generated by default as identity,
        document varchar(255) not null,
        email varchar(255) not null unique,
        last_name varchar(255) not null,
        name varchar(255) not null,
        password varchar(255) not null,
        phone_number varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table vehicles (
        vehicle_type tinyint not null check (vehicle_type between 0 and 1),
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        plate varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table visits (
        created_at timestamp(6) not null,
        expiration_date timestamp(6),
        id bigint generated by default as identity,
        resident_id bigint not null,
        last_name varchar(255) not null,
        name varchar(255) not null,
        vehicle_plate varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    alter table if exists events 
       add constraint FKn5eht9xulbljxwxl1cfrsxyh6 
       foreign key (poc_id) 
       references pocs
Hibernate: 
    alter table if exists pocs 
       add constraint FKcwolwrishvr7h658htihn5xbu 
       foreign key (entity_id) 
       references entities
Hibernate: 
    alter table if exists users 
       add constraint FKhb1q1fcncex0uvlxs3h7vjofc 
       foreign key (entity_id) 
       references entities
Hibernate: 
    alter table if exists vehicles 
       add constraint FKo4u5y92lt2sx8y2dc1bb9sewc 
       foreign key (user_id) 
       references users
Hibernate: 
    alter table if exists visits 
       add constraint FKrvlqg952n1dtjfgun4mr8velu 
       foreign key (resident_id) 
       references users
2025-03-14 01:58:07,772 [Test worker] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-14 01:58:07,805 [Test worker] WARN  org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-14 01:58:07,874 [Test worker] INFO  org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-03-14 01:58:07,958 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler [&quot;http-nio-auto-7&quot;]
2025-03-14 01:58:07,959 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 36507 (http) with context path '/'
2025-03-14 01:58:07,960 [Test worker] INFO  com.visp.gate_command.integration.PocIntegrationTest - Started PocIntegrationTest in 0.405 seconds (process running for 11.778)
2025-03-14 01:58:07,970 [http-nio-auto-7-exec-1] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-14 01:58:07,970 [http-nio-auto-7-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-14 01:58:07,970 [http-nio-auto-7-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-03-14 01:58:08,101 [http-nio-auto-7-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Entering EntityControllerImpl.save with arguments: [{&quot;id&quot;:null,&quot;name&quot;:&quot;name&quot;,&quot;type&quot;:&quot;type&quot;,&quot;*****&quot;:&quot;*****&quot;,&quot;region&quot;:&quot;region&quot;,&quot;city&quot;:&quot;city&quot;,&quot;commune&quot;:&quot;commune&quot;,&quot;taxId&quot;:&quot;*****&quot;,&quot;*****&quot;:&quot;*****&quot;,&quot;syncIntervalMinutes&quot;:5,&quot;parkingHoursAllowed&quot;:5,&quot;active&quot;:true,&quot;createdAt&quot;:null,&quot;lastUpdatedAt&quot;:null}]
2025-03-14 01:58:08,101 [http-nio-auto-7-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Entering EntityServiceImpl.create with arguments: [{&quot;id&quot;:null,&quot;name&quot;:&quot;name&quot;,&quot;type&quot;:&quot;type&quot;,&quot;*****&quot;:&quot;*****&quot;,&quot;region&quot;:&quot;region&quot;,&quot;city&quot;:&quot;city&quot;,&quot;commune&quot;:&quot;commune&quot;,&quot;taxId&quot;:&quot;*****&quot;,&quot;*****&quot;:&quot;*****&quot;,&quot;syncIntervalMinutes&quot;:5,&quot;parkingHoursAllowed&quot;:5,&quot;active&quot;:true,&quot;createdAt&quot;:null,&quot;lastUpdatedAt&quot;:null}]
Hibernate: 
    insert 
    into
        entities
        (active, address, city, commune, contact_phone, created_at, last_updated_at, name, parking_hours_allowed, region, sync_interval_minutes, tax_id, type, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-03-14 01:58:08,105 [http-nio-auto-7-exec-1] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log result for EntityServiceImpl.create
2025-03-14 01:58:08,105 [http-nio-auto-7-exec-1] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log result for EntityControllerImpl.save
2025-03-14 01:58:08,176 [http-nio-auto-7-exec-2] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log arguments for PocControllerImpl.create
2025-03-14 01:58:08,176 [http-nio-auto-7-exec-2] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log arguments for PocServiceImpl.create
Hibernate: 
    insert 
    into
        pocs
        (active, created_at, entity_id, identifier, last_sync, location, name, type, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-03-14 01:58:08,178 [http-nio-auto-7-exec-2] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log result for PocServiceImpl.create
2025-03-14 01:58:08,178 [http-nio-auto-7-exec-2] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log result for PocControllerImpl.create
2025-03-14 01:58:08,246 [http-nio-auto-7-exec-3] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log arguments for PocControllerImpl.update
2025-03-14 01:58:08,246 [http-nio-auto-7-exec-3] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log arguments for PocServiceImpl.update
Hibernate: 
    select
        p1_0.id,
        p1_0.active,
        p1_0.created_at,
        p1_0.entity_id,
        p1_0.identifier,
        p1_0.last_sync,
        p1_0.location,
        p1_0.name,
        p1_0.type 
    from
        pocs p1_0 
    where
        p1_0.id=?
Hibernate: 
    update
        pocs 
    set
        active=?,
        entity_id=?,
        identifier=?,
        last_sync=?,
        location=?,
        name=?,
        type=? 
    where
        id=?
Hibernate: 
    select
        e1_0.id,
        e1_0.active,
        e1_0.address,
        e1_0.city,
        e1_0.commune,
        e1_0.contact_phone,
        e1_0.created_at,
        e1_0.last_updated_at,
        e1_0.name,
        e1_0.parking_hours_allowed,
        e1_0.region,
        e1_0.sync_interval_minutes,
        e1_0.tax_id,
        e1_0.type 
    from
        entities e1_0 
    where
        e1_0.id=?
2025-03-14 01:58:08,250 [http-nio-auto-7-exec-3] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log result for PocServiceImpl.update
2025-03-14 01:58:08,250 [http-nio-auto-7-exec-3] WARN  com.visp.gate_command.aop.LoggingAspect - Failed to log result for PocControllerImpl.update
2025-03-14 01:58:08,252 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-03-14 01:58:08,253 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler [&quot;http-nio-auto-7-36507&quot;]
2025-03-14 01:58:08,253 [tomcat-shutdown] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-03-14 01:58:08,253 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler [&quot;http-nio-auto-7&quot;]
2025-03-14 01:58:08,254 [Test worker] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
Hibernate: 
    drop table if exists entities cascade 
Hibernate: 
    drop table if exists events cascade 
Hibernate: 
    drop table if exists pocs cascade 
Hibernate: 
    drop table if exists users cascade 
Hibernate: 
    drop table if exists vehicles cascade 
Hibernate: 
    drop table if exists visits cascade 
2025-03-14 01:58:08,256 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown initiated...
2025-03-14 01:58:08,256 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-8 - Shutdown completed.
</pre>
</span>
</div>
</div>
<div id="footer">
<p>
<div>
<label class="hidden" id="label-for-line-wrapping-toggle" for="line-wrapping-toggle">Wrap lines
<input id="line-wrapping-toggle" type="checkbox" autocomplete="off"/>
</label>
</div>Generated by 
<a href="http://www.gradle.org">Gradle 8.12.1</a> at 14 mar 2025, 1:58:10</p>
</div>
</div>
</body>
</html>
