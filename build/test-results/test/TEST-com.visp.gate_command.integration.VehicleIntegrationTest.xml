<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="com.visp.gate_command.integration.VehicleIntegrationTest" tests="5" skipped="0" failures="0" errors="0" timestamp="2025-03-14T22:31:01" hostname="emilio-X670-AORUS-ELITE-AX" time="3.468">
  <properties/>
  <testcase name="testGetVehiclesByUser()" classname="com.visp.gate_command.integration.VehicleIntegrationTest" time="0.714"/>
  <testcase name="testCreateVehicle()" classname="com.visp.gate_command.integration.VehicleIntegrationTest" time="0.224"/>
  <testcase name="testGetAllVehiclesByEntity()" classname="com.visp.gate_command.integration.VehicleIntegrationTest" time="0.272"/>
  <testcase name="testUpdateVehicle()" classname="com.visp.gate_command.integration.VehicleIntegrationTest" time="0.271"/>
  <testcase name="testDeleteVehicle()" classname="com.visp.gate_command.integration.VehicleIntegrationTest" time="0.257"/>
  <system-out><![CDATA[19:30:58.266 [Test worker] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.visp.gate_command.integration.VehicleIntegrationTest]: VehicleIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
19:30:58.315 [Test worker] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.visp.gate_command.GateCommandApplication for test class com.visp.gate_command.integration.VehicleIntegrationTest
19:30:58,228 |-INFO in ch.qos.logback.classic.LoggerContext[default] - This is logback-classic version 1.5.16
19:30:58,228 |-INFO in ch.qos.logback.classic.util.ContextInitializer@4afd21c6 - Here is a list of configurators discovered as a service, by rank: 
19:30:58,228 |-INFO in ch.qos.logback.classic.util.ContextInitializer@4afd21c6 -   org.springframework.boot.logging.logback.RootLogLevelConfigurator
19:30:58,228 |-INFO in ch.qos.logback.classic.util.ContextInitializer@4afd21c6 - They will be invoked in order until ExecutionStatus.DO_NOT_INVOKE_NEXT_IF_ANY is returned.
19:30:58,228 |-INFO in ch.qos.logback.classic.util.ContextInitializer@4afd21c6 - Constructed configurator of type class org.springframework.boot.logging.logback.RootLogLevelConfigurator
19:30:58,231 |-INFO in ch.qos.logback.classic.util.ContextInitializer@4afd21c6 - org.springframework.boot.logging.logback.RootLogLevelConfigurator.configure() call lasted 0 milliseconds. ExecutionStatus=INVOKE_NEXT_IF_ANY
19:30:58,231 |-INFO in ch.qos.logback.classic.util.ContextInitializer@4afd21c6 - Trying to configure with ch.qos.logback.classic.joran.SerializedModelConfigurator
19:30:58,232 |-INFO in ch.qos.logback.classic.util.ContextInitializer@4afd21c6 - Constructed configurator of type class ch.qos.logback.classic.joran.SerializedModelConfigurator
19:30:58,232 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.scmo]
19:30:58,232 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.scmo]
19:30:58,232 |-INFO in ch.qos.logback.classic.util.ContextInitializer@4afd21c6 - ch.qos.logback.classic.joran.SerializedModelConfigurator.configure() call lasted 0 milliseconds. ExecutionStatus=INVOKE_NEXT_IF_ANY
19:30:58,232 |-INFO in ch.qos.logback.classic.util.ContextInitializer@4afd21c6 - Trying to configure with ch.qos.logback.classic.util.DefaultJoranConfigurator
19:30:58,233 |-INFO in ch.qos.logback.classic.util.ContextInitializer@4afd21c6 - Constructed configurator of type class ch.qos.logback.classic.util.DefaultJoranConfigurator
19:30:58,233 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
19:30:58,233 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.xml]
19:30:58,233 |-INFO in ch.qos.logback.classic.util.ContextInitializer@4afd21c6 - ch.qos.logback.classic.util.DefaultJoranConfigurator.configure() call lasted 0 milliseconds. ExecutionStatus=INVOKE_NEXT_IF_ANY
19:30:58,233 |-INFO in ch.qos.logback.classic.util.ContextInitializer@4afd21c6 - Trying to configure with ch.qos.logback.classic.BasicConfigurator
19:30:58,233 |-INFO in ch.qos.logback.classic.util.ContextInitializer@4afd21c6 - Constructed configurator of type class ch.qos.logback.classic.BasicConfigurator
19:30:58,233 |-INFO in ch.qos.logback.classic.BasicConfigurator@4d0753c9 - Setting up default configuration.
19:30:58,238 |-INFO in ch.qos.logback.core.ConsoleAppender[console] - BEWARE: Writing to the console can be very slow. Avoid logging to the 
19:30:58,238 |-INFO in ch.qos.logback.core.ConsoleAppender[console] - console in production environments, especially in high volume systems.
19:30:58,238 |-INFO in ch.qos.logback.core.ConsoleAppender[console] - See also https://logback.qos.ch/codes.html#slowConsole
19:30:58,238 |-INFO in ch.qos.logback.classic.util.ContextInitializer@4afd21c6 - ch.qos.logback.classic.BasicConfigurator.configure() call lasted 5 milliseconds. ExecutionStatus=NEUTRAL
19:30:58,474 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - Processing appender named [MASKED_CONSOLE]
19:30:58,474 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
19:30:58,484 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - BEWARE: Writing to the console can be very slow. Avoid logging to the 
19:30:58,484 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - console in production environments, especially in high volume systems.
19:30:58,484 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - See also https://logback.qos.ch/codes.html#slowConsole
19:30:58,484 |-WARN in ch.qos.logback.core.model.processor.AppenderModelHandler - Appender named [JSON_CONSOLE] not referenced. Skipping further processing.
19:30:58,484 |-INFO in ch.qos.logback.classic.model.processor.RootLoggerModelHandler - Setting level of ROOT logger to INFO
19:30:58,484 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@1416a80a - Propagating INFO level on Logger[ROOT] onto the JUL framework
19:30:58,484 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [MASKED_CONSOLE] to Logger[ROOT]
19:30:58,484 |-INFO in ch.qos.logback.core.model.processor.DefaultProcessor@719bb3b4 - End of configuration.
19:30:58,484 |-INFO in org.springframework.boot.logging.logback.SpringBootJoranConfigurator@52cb4f50 - Registering current configuration as safe fallback point


  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.4.3)

2025-03-14 19:30:58,500 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-03-14 19:30:58,523 [Test worker] INFO  com.visp.gate_command.integration.VehicleIntegrationTest - Starting VehicleIntegrationTest using Java 21.0.6 with PID 76927 (started by emilio in /home/emilio/repos/gate-command)
2025-03-14 19:30:58,523 [Test worker] DEBUG com.visp.gate_command.integration.VehicleIntegrationTest - Running with Spring Boot v3.4.3, Spring v6.2.3
2025-03-14 19:30:58,524 [Test worker] INFO  com.visp.gate_command.integration.VehicleIntegrationTest - The following 1 profile is active: "intTest"
2025-03-14 19:30:58,757 [Test worker] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-14 19:30:58,784 [Test worker] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 6 JPA repository interfaces.
2025-03-14 19:30:59,178 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 0 (http)
2025-03-14 19:30:59,184 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-1"]
2025-03-14 19:30:59,185 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-03-14 19:30:59,185 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.36]
2025-03-14 19:30:59,210 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-14 19:30:59,210 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 677 ms
2025-03-14 19:30:59,276 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-14 19:30:59,349 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-03-14 19:30:59,350 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-14 19:30:59,376 [Test worker] INFO  liquibase.database - Set default schema name to PUBLIC
2025-03-14 19:30:59,563 [Test worker] INFO  liquibase.changelog - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2025-03-14 19:30:59,616 [Test worker] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-03-14 19:30:59,647 [Test worker] INFO  liquibase.lockservice - Successfully acquired change log lock
2025-03-14 19:30:59,648 [Test worker] INFO  liquibase.command - Using deploymentId: 1991459647
2025-03-14 19:30:59,648 [Test worker] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-03-14 19:30:59,664 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-entities-table.xml::1::your-name
2025-03-14 19:30:59,668 [Test worker] INFO  liquibase.changelog - Table entities created
2025-03-14 19:30:59,669 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-entities-table.xml::1::your-name ran successfully in 5ms
2025-03-14 19:30:59,672 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-users-table.xml::2::your-name
2025-03-14 19:30:59,675 [Test worker] INFO  liquibase.changelog - Table users created
2025-03-14 19:30:59,676 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-users-table.xml::2::your-name ran successfully in 4ms
2025-03-14 19:30:59,677 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-vehicles-table.xml::3::your-name
2025-03-14 19:30:59,678 [Test worker] INFO  liquibase.changelog - Table vehicles created
2025-03-14 19:30:59,678 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-vehicles-table.xml::3::your-name ran successfully in 1ms
2025-03-14 19:30:59,679 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-parking-table.xml::4::your-name
2025-03-14 19:30:59,681 [Test worker] INFO  liquibase.changelog - Table parking created
2025-03-14 19:30:59,681 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-parking-table.xml::4::your-name ran successfully in 2ms
2025-03-14 19:30:59,682 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-pocs-table.xml::6::your-name
2025-03-14 19:30:59,684 [Test worker] INFO  liquibase.changelog - Table pocs created
2025-03-14 19:30:59,684 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-pocs-table.xml::6::your-name ran successfully in 2ms
2025-03-14 19:30:59,685 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-events-table.xml::7::your-name
2025-03-14 19:30:59,687 [Test worker] INFO  liquibase.changelog - Table events created
2025-03-14 19:30:59,688 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-events-table.xml::7::your-name ran successfully in 3ms
2025-03-14 19:30:59,690 [Test worker] INFO  liquibase.util - UPDATE SUMMARY
2025-03-14 19:30:59,691 [Test worker] INFO  liquibase.util - Run:                          6
2025-03-14 19:30:59,691 [Test worker] INFO  liquibase.util - Previously run:               0
2025-03-14 19:30:59,691 [Test worker] INFO  liquibase.util - Filtered out:                 0
2025-03-14 19:30:59,691 [Test worker] INFO  liquibase.util - -------------------------------
2025-03-14 19:30:59,691 [Test worker] INFO  liquibase.util - Total change sets:            6
2025-03-14 19:30:59,691 [Test worker] INFO  liquibase.util - Update summary generated
2025-03-14 19:30:59,692 [Test worker] INFO  liquibase.command - Update command completed successfully.
2025-03-14 19:30:59,692 [Test worker] INFO  liquibase.ui - Liquibase: Update has been successful. Rows affected: 6
2025-03-14 19:30:59,693 [Test worker] INFO  liquibase.lockservice - Successfully released change log lock
2025-03-14 19:30:59,693 [Test worker] INFO  liquibase.command - Command execution complete
2025-03-14 19:30:59,748 [Test worker] INFO  org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-14 19:30:59,774 [Test worker] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.8.Final
2025-03-14 19:30:59,792 [Test worker] INFO  org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-14 19:30:59,900 [Test worker] INFO  org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-14 19:30:59,917 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-14 19:30:59,922 [Test worker] INFO  org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-03-14 19:31:00,285 [Test worker] INFO  org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    drop table if exists entities cascade 
Hibernate: 
    drop table if exists events cascade 
Hibernate: 
    drop table if exists parking cascade 
Hibernate: 
    drop table if exists pocs cascade 
Hibernate: 
    drop table if exists users cascade 
Hibernate: 
    drop table if exists vehicles cascade 
Hibernate: 
    create table entities (
        active boolean not null,
        parking_hours_allowed integer not null,
        sync_interval_minutes integer not null,
        visit_size_limit integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_updated_at timestamp(6) not null,
        address varchar(255) not null,
        city varchar(255) not null,
        commune varchar(255) not null,
        contact_phone varchar(255) not null,
        name varchar(255) not null,
        region varchar(255) not null,
        tax_id varchar(255) not null,
        type varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table events (
        type tinyint not null check (type between 0 and 1),
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        poc_id bigint not null,
        plate varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table parking (
        available boolean not null,
        is_for_visit boolean not null,
        created_at timestamp(6) not null,
        expiration_date timestamp(6),
        id bigint generated by default as identity,
        user_id bigint not null,
        identifier varchar(255) not null,
        primary key (id),
        unique (identifier)
    )
Hibernate: 
    create table pocs (
        active boolean not null,
        type tinyint not null check (type between 0 and 1),
        created_at timestamp(6) not null,
        entity_id bigint not null,
        id bigint generated by default as identity,
        last_sync timestamp(6) not null,
        identifier varchar(255) not null unique,
        location varchar(255) not null,
        name varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table users (
        has_assigned_parking boolean not null,
        type tinyint not null check (type between 0 and 4),
        created_at timestamp(6) not null,
        entity_id bigint not null,
        id bigint generated by default as identity,
        visit_date_time timestamp(6),
        document varchar(255) not null,
        email varchar(255) not null unique,
        last_name varchar(255) not null,
        name varchar(255) not null,
        password varchar(255) not null,
        phone_number varchar(255) not null,
        unit varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table vehicles (
        vehicle_type tinyint not null check (vehicle_type between 0 and 1),
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        plate varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    alter table if exists events 
       add constraint FKn5eht9xulbljxwxl1cfrsxyh6 
       foreign key (poc_id) 
       references pocs
Hibernate: 
    alter table if exists parking 
       add constraint FKem4wiv4ye122xiq7r7eny90v8 
       foreign key (user_id) 
       references users
Hibernate: 
    alter table if exists pocs 
       add constraint FKcwolwrishvr7h658htihn5xbu 
       foreign key (entity_id) 
       references entities
Hibernate: 
    alter table if exists users 
       add constraint FKhb1q1fcncex0uvlxs3h7vjofc 
       foreign key (entity_id) 
       references entities
Hibernate: 
    alter table if exists vehicles 
       add constraint FKo4u5y92lt2sx8y2dc1bb9sewc 
       foreign key (user_id) 
       references users
2025-03-14 19:31:00,304 [Test worker] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-14 19:31:00,583 [Test worker] WARN  org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-14 19:31:00,654 [Test worker] INFO  org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-03-14 19:31:01,076 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-1"]
2025-03-14 19:31:01,081 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 32911 (http) with context path '/'
2025-03-14 19:31:01,085 [Test worker] INFO  com.visp.gate_command.integration.VehicleIntegrationTest - Started VehicleIntegrationTest in 2.72 seconds (process running for 3.133)
2025-03-14 19:31:01,387 [http-nio-auto-1-exec-1] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-14 19:31:01,387 [http-nio-auto-1-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-14 19:31:01,388 [http-nio-auto-1-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-03-14 19:31:01,517 [http-nio-auto-1-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Entering EntityControllerImpl.save with arguments: [{"id":null,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":null,"lastUpdatedAt":null}]
2025-03-14 19:31:01,517 [http-nio-auto-1-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Entering EntityServiceImpl.create with arguments: [{"id":null,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":null,"lastUpdatedAt":null}]
Hibernate: 
    insert 
    into
        entities
        (active, address, city, commune, contact_phone, created_at, last_updated_at, name, parking_hours_allowed, region, sync_interval_minutes, tax_id, type, visit_size_limit, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-03-14 19:31:01,546 [http-nio-auto-1-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting EntityServiceImpl.create with result: {"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:01","lastUpdatedAt":"2025-03-14 19:31:01"}
2025-03-14 19:31:01,552 [http-nio-auto-1-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting EntityControllerImpl.save with result: {"headers":{},"body":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:01","lastUpdatedAt":"2025-03-14 19:31:01"},"statusCode":"OK","statusCodeValue":200}
2025-03-14 19:31:01,617 [http-nio-auto-1-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Entering UserControllerImpl.save with arguments: [{"id":null,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:01","lastUpdatedAt":"2025-03-14 19:31:01"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":null}]
2025-03-14 19:31:01,618 [http-nio-auto-1-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Entering UserServiceImpl.create with arguments: [{"id":null,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:01","lastUpdatedAt":"2025-03-14 19:31:01"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":null}]
Hibernate: 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.document,
        u1_0.email,
        u1_0.entity_id,
        u1_0.has_assigned_parking,
        u1_0.last_name,
        u1_0.name,
        u1_0.password,
        u1_0.phone_number,
        u1_0.type,
        u1_0.unit,
        u1_0.visit_date_time 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    insert 
    into
        users
        (created_at, document, email, entity_id, has_assigned_parking, last_name, name, password, phone_number, type, unit, visit_date_time, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-03-14 19:31:01,668 [http-nio-auto-1-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting UserServiceImpl.create with result: {"id":1,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:01","lastUpdatedAt":"2025-03-14 19:31:01"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":"2025-03-14 19:31:01"}
2025-03-14 19:31:01,669 [http-nio-auto-1-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting UserControllerImpl.save with result: {"headers":{},"body":{"id":1,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:01","lastUpdatedAt":"2025-03-14 19:31:01"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":"2025-03-14 19:31:01"},"statusCode":"OK","statusCodeValue":200}
Hibernate: 
    insert 
    into
        vehicles
        (created_at, plate, user_id, vehicle_type, id) 
    values
        (?, ?, ?, ?, default)
Hibernate: 
    select
        v1_0.id,
        v1_0.created_at,
        v1_0.plate,
        v1_0.user_id,
        v1_0.vehicle_type 
    from
        vehicles v1_0 
    left join
        users u1_0 
            on u1_0.id=v1_0.user_id 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.document,
        u1_0.email,
        u1_0.entity_id,
        u1_0.has_assigned_parking,
        u1_0.last_name,
        u1_0.name,
        u1_0.password,
        u1_0.phone_number,
        u1_0.type,
        u1_0.unit,
        u1_0.visit_date_time 
    from
        users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        e1_0.id,
        e1_0.active,
        e1_0.address,
        e1_0.city,
        e1_0.commune,
        e1_0.contact_phone,
        e1_0.created_at,
        e1_0.last_updated_at,
        e1_0.name,
        e1_0.parking_hours_allowed,
        e1_0.region,
        e1_0.sync_interval_minutes,
        e1_0.tax_id,
        e1_0.type,
        e1_0.visit_size_limit 
    from
        entities e1_0 
    where
        e1_0.id=?
2025-03-14 19:31:01,791 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-03-14 19:31:01,791 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-1-32911"]
2025-03-14 19:31:01,792 [tomcat-shutdown] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-03-14 19:31:01,792 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-1"]
2025-03-14 19:31:01,794 [Test worker] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
Hibernate: 
    drop table if exists entities cascade 
Hibernate: 
    drop table if exists events cascade 
Hibernate: 
    drop table if exists parking cascade 
Hibernate: 
    drop table if exists pocs cascade 
Hibernate: 
    drop table if exists users cascade 
Hibernate: 
    drop table if exists vehicles cascade 
2025-03-14 19:31:01,797 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-14 19:31:01,798 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
19:31:01,815 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - Processing appender named [MASKED_CONSOLE]
19:31:01,815 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
19:31:01,815 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - BEWARE: Writing to the console can be very slow. Avoid logging to the 
19:31:01,815 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - console in production environments, especially in high volume systems.
19:31:01,815 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - See also https://logback.qos.ch/codes.html#slowConsole
19:31:01,815 |-WARN in ch.qos.logback.core.model.processor.AppenderModelHandler - Appender named [JSON_CONSOLE] not referenced. Skipping further processing.
19:31:01,815 |-INFO in ch.qos.logback.classic.model.processor.RootLoggerModelHandler - Setting level of ROOT logger to INFO
19:31:01,815 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@673e239b - Propagating INFO level on Logger[ROOT] onto the JUL framework
19:31:01,815 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [MASKED_CONSOLE] to Logger[ROOT]
19:31:01,815 |-INFO in ch.qos.logback.core.model.processor.DefaultProcessor@6c8e40fc - End of configuration.
19:31:01,815 |-INFO in org.springframework.boot.logging.logback.SpringBootJoranConfigurator@41bb5a40 - Registering current configuration as safe fallback point


  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.4.3)

2025-03-14 19:31:01,818 [Test worker] INFO  com.visp.gate_command.integration.VehicleIntegrationTest - Starting VehicleIntegrationTest using Java 21.0.6 with PID 76927 (started by emilio in /home/emilio/repos/gate-command)
2025-03-14 19:31:01,818 [Test worker] DEBUG com.visp.gate_command.integration.VehicleIntegrationTest - Running with Spring Boot v3.4.3, Spring v6.2.3
2025-03-14 19:31:01,818 [Test worker] INFO  com.visp.gate_command.integration.VehicleIntegrationTest - The following 1 profile is active: "intTest"
2025-03-14 19:31:01,869 [Test worker] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-14 19:31:01,877 [Test worker] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 6 JPA repository interfaces.
2025-03-14 19:31:01,936 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 0 (http)
2025-03-14 19:31:01,936 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-2"]
2025-03-14 19:31:01,936 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-03-14 19:31:01,936 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.36]
2025-03-14 19:31:01,943 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-14 19:31:01,943 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 125 ms
2025-03-14 19:31:01,962 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-03-14 19:31:01,965 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:testdb user=SA
2025-03-14 19:31:01,965 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-03-14 19:31:01,966 [Test worker] INFO  liquibase.database - Set default schema name to PUBLIC
2025-03-14 19:31:02,015 [Test worker] INFO  liquibase.changelog - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2025-03-14 19:31:02,018 [Test worker] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-03-14 19:31:02,028 [Test worker] INFO  liquibase.lockservice - Successfully acquired change log lock
2025-03-14 19:31:02,029 [Test worker] INFO  liquibase.command - Using deploymentId: 1991462029
2025-03-14 19:31:02,029 [Test worker] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-03-14 19:31:02,035 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-entities-table.xml::1::your-name
2025-03-14 19:31:02,036 [Test worker] INFO  liquibase.changelog - Table entities created
2025-03-14 19:31:02,036 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-entities-table.xml::1::your-name ran successfully in 1ms
2025-03-14 19:31:02,037 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-users-table.xml::2::your-name
2025-03-14 19:31:02,041 [Test worker] INFO  liquibase.changelog - Table users created
2025-03-14 19:31:02,041 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-users-table.xml::2::your-name ran successfully in 3ms
2025-03-14 19:31:02,042 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-vehicles-table.xml::3::your-name
2025-03-14 19:31:02,043 [Test worker] INFO  liquibase.changelog - Table vehicles created
2025-03-14 19:31:02,043 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-vehicles-table.xml::3::your-name ran successfully in 1ms
2025-03-14 19:31:02,044 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-parking-table.xml::4::your-name
2025-03-14 19:31:02,046 [Test worker] INFO  liquibase.changelog - Table parking created
2025-03-14 19:31:02,046 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-parking-table.xml::4::your-name ran successfully in 2ms
2025-03-14 19:31:02,047 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-pocs-table.xml::6::your-name
2025-03-14 19:31:02,048 [Test worker] INFO  liquibase.changelog - Table pocs created
2025-03-14 19:31:02,049 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-pocs-table.xml::6::your-name ran successfully in 2ms
2025-03-14 19:31:02,050 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-events-table.xml::7::your-name
2025-03-14 19:31:02,051 [Test worker] INFO  liquibase.changelog - Table events created
2025-03-14 19:31:02,051 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-events-table.xml::7::your-name ran successfully in 1ms
2025-03-14 19:31:02,052 [Test worker] INFO  liquibase.util - UPDATE SUMMARY
2025-03-14 19:31:02,052 [Test worker] INFO  liquibase.util - Run:                          6
2025-03-14 19:31:02,052 [Test worker] INFO  liquibase.util - Previously run:               0
2025-03-14 19:31:02,052 [Test worker] INFO  liquibase.util - Filtered out:                 0
2025-03-14 19:31:02,052 [Test worker] INFO  liquibase.util - -------------------------------
2025-03-14 19:31:02,052 [Test worker] INFO  liquibase.util - Total change sets:            6
2025-03-14 19:31:02,052 [Test worker] INFO  liquibase.util - Update summary generated
2025-03-14 19:31:02,052 [Test worker] INFO  liquibase.command - Update command completed successfully.
2025-03-14 19:31:02,052 [Test worker] INFO  liquibase.ui - Liquibase: Update has been successful. Rows affected: 6
2025-03-14 19:31:02,053 [Test worker] INFO  liquibase.lockservice - Successfully released change log lock
2025-03-14 19:31:02,053 [Test worker] INFO  liquibase.command - Command execution complete
2025-03-14 19:31:02,063 [Test worker] INFO  org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-14 19:31:02,064 [Test worker] INFO  org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-14 19:31:02,068 [Test worker] INFO  org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-14 19:31:02,069 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-14 19:31:02,069 [Test worker] INFO  org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-03-14 19:31:02,125 [Test worker] INFO  org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    drop table if exists entities cascade 
Hibernate: 
    drop table if exists events cascade 
Hibernate: 
    drop table if exists parking cascade 
Hibernate: 
    drop table if exists pocs cascade 
Hibernate: 
    drop table if exists users cascade 
Hibernate: 
    drop table if exists vehicles cascade 
Hibernate: 
    create table entities (
        active boolean not null,
        parking_hours_allowed integer not null,
        sync_interval_minutes integer not null,
        visit_size_limit integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_updated_at timestamp(6) not null,
        address varchar(255) not null,
        city varchar(255) not null,
        commune varchar(255) not null,
        contact_phone varchar(255) not null,
        name varchar(255) not null,
        region varchar(255) not null,
        tax_id varchar(255) not null,
        type varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table events (
        type tinyint not null check (type between 0 and 1),
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        poc_id bigint not null,
        plate varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table parking (
        available boolean not null,
        is_for_visit boolean not null,
        created_at timestamp(6) not null,
        expiration_date timestamp(6),
        id bigint generated by default as identity,
        user_id bigint not null,
        identifier varchar(255) not null,
        primary key (id),
        unique (identifier)
    )
Hibernate: 
    create table pocs (
        active boolean not null,
        type tinyint not null check (type between 0 and 1),
        created_at timestamp(6) not null,
        entity_id bigint not null,
        id bigint generated by default as identity,
        last_sync timestamp(6) not null,
        identifier varchar(255) not null unique,
        location varchar(255) not null,
        name varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table users (
        has_assigned_parking boolean not null,
        type tinyint not null check (type between 0 and 4),
        created_at timestamp(6) not null,
        entity_id bigint not null,
        id bigint generated by default as identity,
        visit_date_time timestamp(6),
        document varchar(255) not null,
        email varchar(255) not null unique,
        last_name varchar(255) not null,
        name varchar(255) not null,
        password varchar(255) not null,
        phone_number varchar(255) not null,
        unit varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table vehicles (
        vehicle_type tinyint not null check (vehicle_type between 0 and 1),
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        plate varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    alter table if exists events 
       add constraint FKn5eht9xulbljxwxl1cfrsxyh6 
       foreign key (poc_id) 
       references pocs
Hibernate: 
    alter table if exists parking 
       add constraint FKem4wiv4ye122xiq7r7eny90v8 
       foreign key (user_id) 
       references users
Hibernate: 
    alter table if exists pocs 
       add constraint FKcwolwrishvr7h658htihn5xbu 
       foreign key (entity_id) 
       references entities
Hibernate: 
    alter table if exists users 
       add constraint FKhb1q1fcncex0uvlxs3h7vjofc 
       foreign key (entity_id) 
       references entities
Hibernate: 
    alter table if exists vehicles 
       add constraint FKo4u5y92lt2sx8y2dc1bb9sewc 
       foreign key (user_id) 
       references users
2025-03-14 19:31:02,133 [Test worker] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-14 19:31:02,180 [Test worker] WARN  org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-14 19:31:02,229 [Test worker] INFO  org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-03-14 19:31:02,333 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-2"]
2025-03-14 19:31:02,334 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 44841 (http) with context path '/'
2025-03-14 19:31:02,336 [Test worker] INFO  com.visp.gate_command.integration.VehicleIntegrationTest - Started VehicleIntegrationTest in 0.532 seconds (process running for 4.384)
2025-03-14 19:31:02,346 [http-nio-auto-2-exec-1] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-14 19:31:02,346 [http-nio-auto-2-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-14 19:31:02,347 [http-nio-auto-2-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-03-14 19:31:02,438 [http-nio-auto-2-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Entering EntityControllerImpl.save with arguments: [{"id":null,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":null,"lastUpdatedAt":null}]
2025-03-14 19:31:02,438 [http-nio-auto-2-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Entering EntityServiceImpl.create with arguments: [{"id":null,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":null,"lastUpdatedAt":null}]
Hibernate: 
    insert 
    into
        entities
        (active, address, city, commune, contact_phone, created_at, last_updated_at, name, parking_hours_allowed, region, sync_interval_minutes, tax_id, type, visit_size_limit, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-03-14 19:31:02,441 [http-nio-auto-2-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting EntityServiceImpl.create with result: {"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:02","lastUpdatedAt":"2025-03-14 19:31:02"}
2025-03-14 19:31:02,442 [http-nio-auto-2-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting EntityControllerImpl.save with result: {"headers":{},"body":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:02","lastUpdatedAt":"2025-03-14 19:31:02"},"statusCode":"OK","statusCodeValue":200}
2025-03-14 19:31:02,496 [http-nio-auto-2-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Entering UserControllerImpl.save with arguments: [{"id":null,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:02","lastUpdatedAt":"2025-03-14 19:31:02"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":null}]
2025-03-14 19:31:02,496 [http-nio-auto-2-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Entering UserServiceImpl.create with arguments: [{"id":null,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:02","lastUpdatedAt":"2025-03-14 19:31:02"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":null}]
Hibernate: 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.document,
        u1_0.email,
        u1_0.entity_id,
        u1_0.has_assigned_parking,
        u1_0.last_name,
        u1_0.name,
        u1_0.password,
        u1_0.phone_number,
        u1_0.type,
        u1_0.unit,
        u1_0.visit_date_time 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    insert 
    into
        users
        (created_at, document, email, entity_id, has_assigned_parking, last_name, name, password, phone_number, type, unit, visit_date_time, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-03-14 19:31:02,500 [http-nio-auto-2-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting UserServiceImpl.create with result: {"id":1,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:02","lastUpdatedAt":"2025-03-14 19:31:02"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":"2025-03-14 19:31:02"}
2025-03-14 19:31:02,500 [http-nio-auto-2-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting UserControllerImpl.save with result: {"headers":{},"body":{"id":1,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:02","lastUpdatedAt":"2025-03-14 19:31:02"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":"2025-03-14 19:31:02"},"statusCode":"OK","statusCodeValue":200}
Hibernate: 
    insert 
    into
        vehicles
        (created_at, plate, user_id, vehicle_type, id) 
    values
        (?, ?, ?, ?, default)
2025-03-14 19:31:02,556 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-03-14 19:31:02,556 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-2-44841"]
2025-03-14 19:31:02,557 [tomcat-shutdown] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-03-14 19:31:02,557 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-2"]
2025-03-14 19:31:02,558 [Test worker] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
Hibernate: 
    drop table if exists entities cascade 
Hibernate: 
    drop table if exists events cascade 
Hibernate: 
    drop table if exists parking cascade 
Hibernate: 
    drop table if exists pocs cascade 
Hibernate: 
    drop table if exists users cascade 
Hibernate: 
    drop table if exists vehicles cascade 
2025-03-14 19:31:02,560 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-03-14 19:31:02,560 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
19:31:02,570 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - Processing appender named [MASKED_CONSOLE]
19:31:02,570 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
19:31:02,571 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - BEWARE: Writing to the console can be very slow. Avoid logging to the 
19:31:02,571 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - console in production environments, especially in high volume systems.
19:31:02,571 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - See also https://logback.qos.ch/codes.html#slowConsole
19:31:02,571 |-WARN in ch.qos.logback.core.model.processor.AppenderModelHandler - Appender named [JSON_CONSOLE] not referenced. Skipping further processing.
19:31:02,571 |-INFO in ch.qos.logback.classic.model.processor.RootLoggerModelHandler - Setting level of ROOT logger to INFO
19:31:02,571 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@79849cab - Propagating INFO level on Logger[ROOT] onto the JUL framework
19:31:02,571 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [MASKED_CONSOLE] to Logger[ROOT]
19:31:02,571 |-INFO in ch.qos.logback.core.model.processor.DefaultProcessor@5f9f6511 - End of configuration.
19:31:02,571 |-INFO in org.springframework.boot.logging.logback.SpringBootJoranConfigurator@682c0560 - Registering current configuration as safe fallback point


  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.4.3)

2025-03-14 19:31:02,572 [Test worker] INFO  com.visp.gate_command.integration.VehicleIntegrationTest - Starting VehicleIntegrationTest using Java 21.0.6 with PID 76927 (started by emilio in /home/emilio/repos/gate-command)
2025-03-14 19:31:02,573 [Test worker] DEBUG com.visp.gate_command.integration.VehicleIntegrationTest - Running with Spring Boot v3.4.3, Spring v6.2.3
2025-03-14 19:31:02,573 [Test worker] INFO  com.visp.gate_command.integration.VehicleIntegrationTest - The following 1 profile is active: "intTest"
2025-03-14 19:31:02,616 [Test worker] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-14 19:31:02,623 [Test worker] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 6 JPA repository interfaces.
2025-03-14 19:31:02,667 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 0 (http)
2025-03-14 19:31:02,668 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-3"]
2025-03-14 19:31:02,668 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-03-14 19:31:02,668 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.36]
2025-03-14 19:31:02,674 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-14 19:31:02,674 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 101 ms
2025-03-14 19:31:02,685 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-03-14 19:31:02,686 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:testdb user=SA
2025-03-14 19:31:02,686 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-03-14 19:31:02,687 [Test worker] INFO  liquibase.database - Set default schema name to PUBLIC
2025-03-14 19:31:02,711 [Test worker] INFO  liquibase.changelog - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2025-03-14 19:31:02,712 [Test worker] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-03-14 19:31:02,718 [Test worker] INFO  liquibase.lockservice - Successfully acquired change log lock
2025-03-14 19:31:02,718 [Test worker] INFO  liquibase.command - Using deploymentId: 1991462718
2025-03-14 19:31:02,718 [Test worker] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-03-14 19:31:02,721 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-entities-table.xml::1::your-name
2025-03-14 19:31:02,722 [Test worker] INFO  liquibase.changelog - Table entities created
2025-03-14 19:31:02,722 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-entities-table.xml::1::your-name ran successfully in 1ms
2025-03-14 19:31:02,725 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-users-table.xml::2::your-name
2025-03-14 19:31:02,728 [Test worker] INFO  liquibase.changelog - Table users created
2025-03-14 19:31:02,729 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-users-table.xml::2::your-name ran successfully in 2ms
2025-03-14 19:31:02,729 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-vehicles-table.xml::3::your-name
2025-03-14 19:31:02,731 [Test worker] INFO  liquibase.changelog - Table vehicles created
2025-03-14 19:31:02,731 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-vehicles-table.xml::3::your-name ran successfully in 2ms
2025-03-14 19:31:02,731 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-parking-table.xml::4::your-name
2025-03-14 19:31:02,733 [Test worker] INFO  liquibase.changelog - Table parking created
2025-03-14 19:31:02,733 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-parking-table.xml::4::your-name ran successfully in 2ms
2025-03-14 19:31:02,734 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-pocs-table.xml::6::your-name
2025-03-14 19:31:02,749 [Test worker] INFO  liquibase.changelog - Table pocs created
2025-03-14 19:31:02,749 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-pocs-table.xml::6::your-name ran successfully in 15ms
2025-03-14 19:31:02,750 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-events-table.xml::7::your-name
2025-03-14 19:31:02,752 [Test worker] INFO  liquibase.changelog - Table events created
2025-03-14 19:31:02,752 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-events-table.xml::7::your-name ran successfully in 1ms
2025-03-14 19:31:02,753 [Test worker] INFO  liquibase.util - UPDATE SUMMARY
2025-03-14 19:31:02,753 [Test worker] INFO  liquibase.util - Run:                          6
2025-03-14 19:31:02,753 [Test worker] INFO  liquibase.util - Previously run:               0
2025-03-14 19:31:02,753 [Test worker] INFO  liquibase.util - Filtered out:                 0
2025-03-14 19:31:02,753 [Test worker] INFO  liquibase.util - -------------------------------
2025-03-14 19:31:02,753 [Test worker] INFO  liquibase.util - Total change sets:            6
2025-03-14 19:31:02,753 [Test worker] INFO  liquibase.util - Update summary generated
2025-03-14 19:31:02,753 [Test worker] INFO  liquibase.command - Update command completed successfully.
2025-03-14 19:31:02,753 [Test worker] INFO  liquibase.ui - Liquibase: Update has been successful. Rows affected: 6
2025-03-14 19:31:02,753 [Test worker] INFO  liquibase.lockservice - Successfully released change log lock
2025-03-14 19:31:02,753 [Test worker] INFO  liquibase.command - Command execution complete
2025-03-14 19:31:02,763 [Test worker] INFO  org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-14 19:31:02,764 [Test worker] INFO  org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-14 19:31:02,768 [Test worker] INFO  org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-14 19:31:02,768 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-14 19:31:02,768 [Test worker] INFO  org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-03-14 19:31:02,811 [Test worker] INFO  org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    drop table if exists entities cascade 
Hibernate: 
    drop table if exists events cascade 
Hibernate: 
    drop table if exists parking cascade 
Hibernate: 
    drop table if exists pocs cascade 
Hibernate: 
    drop table if exists users cascade 
Hibernate: 
    drop table if exists vehicles cascade 
Hibernate: 
    create table entities (
        active boolean not null,
        parking_hours_allowed integer not null,
        sync_interval_minutes integer not null,
        visit_size_limit integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_updated_at timestamp(6) not null,
        address varchar(255) not null,
        city varchar(255) not null,
        commune varchar(255) not null,
        contact_phone varchar(255) not null,
        name varchar(255) not null,
        region varchar(255) not null,
        tax_id varchar(255) not null,
        type varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table events (
        type tinyint not null check (type between 0 and 1),
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        poc_id bigint not null,
        plate varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table parking (
        available boolean not null,
        is_for_visit boolean not null,
        created_at timestamp(6) not null,
        expiration_date timestamp(6),
        id bigint generated by default as identity,
        user_id bigint not null,
        identifier varchar(255) not null,
        primary key (id),
        unique (identifier)
    )
Hibernate: 
    create table pocs (
        active boolean not null,
        type tinyint not null check (type between 0 and 1),
        created_at timestamp(6) not null,
        entity_id bigint not null,
        id bigint generated by default as identity,
        last_sync timestamp(6) not null,
        identifier varchar(255) not null unique,
        location varchar(255) not null,
        name varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table users (
        has_assigned_parking boolean not null,
        type tinyint not null check (type between 0 and 4),
        created_at timestamp(6) not null,
        entity_id bigint not null,
        id bigint generated by default as identity,
        visit_date_time timestamp(6),
        document varchar(255) not null,
        email varchar(255) not null unique,
        last_name varchar(255) not null,
        name varchar(255) not null,
        password varchar(255) not null,
        phone_number varchar(255) not null,
        unit varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table vehicles (
        vehicle_type tinyint not null check (vehicle_type between 0 and 1),
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        plate varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    alter table if exists events 
       add constraint FKn5eht9xulbljxwxl1cfrsxyh6 
       foreign key (poc_id) 
       references pocs
Hibernate: 
    alter table if exists parking 
       add constraint FKem4wiv4ye122xiq7r7eny90v8 
       foreign key (user_id) 
       references users
Hibernate: 
    alter table if exists pocs 
       add constraint FKcwolwrishvr7h658htihn5xbu 
       foreign key (entity_id) 
       references entities
Hibernate: 
    alter table if exists users 
       add constraint FKhb1q1fcncex0uvlxs3h7vjofc 
       foreign key (entity_id) 
       references entities
Hibernate: 
    alter table if exists vehicles 
       add constraint FKo4u5y92lt2sx8y2dc1bb9sewc 
       foreign key (user_id) 
       references users
2025-03-14 19:31:02,817 [Test worker] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-14 19:31:02,858 [Test worker] WARN  org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-14 19:31:02,906 [Test worker] INFO  org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-03-14 19:31:02,982 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-3"]
2025-03-14 19:31:02,983 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 42367 (http) with context path '/'
2025-03-14 19:31:02,984 [Test worker] INFO  com.visp.gate_command.integration.VehicleIntegrationTest - Started VehicleIntegrationTest in 0.422 seconds (process running for 5.032)
2025-03-14 19:31:02,992 [http-nio-auto-3-exec-1] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-14 19:31:02,992 [http-nio-auto-3-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-14 19:31:02,992 [http-nio-auto-3-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-03-14 19:31:03,083 [http-nio-auto-3-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Entering EntityControllerImpl.save with arguments: [{"id":null,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":null,"lastUpdatedAt":null}]
2025-03-14 19:31:03,083 [http-nio-auto-3-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Entering EntityServiceImpl.create with arguments: [{"id":null,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":null,"lastUpdatedAt":null}]
Hibernate: 
    insert 
    into
        entities
        (active, address, city, commune, contact_phone, created_at, last_updated_at, name, parking_hours_allowed, region, sync_interval_minutes, tax_id, type, visit_size_limit, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-03-14 19:31:03,085 [http-nio-auto-3-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting EntityServiceImpl.create with result: {"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:03","lastUpdatedAt":"2025-03-14 19:31:03"}
2025-03-14 19:31:03,087 [http-nio-auto-3-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting EntityControllerImpl.save with result: {"headers":{},"body":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:03","lastUpdatedAt":"2025-03-14 19:31:03"},"statusCode":"OK","statusCodeValue":200}
2025-03-14 19:31:03,140 [http-nio-auto-3-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Entering UserControllerImpl.save with arguments: [{"id":null,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:03","lastUpdatedAt":"2025-03-14 19:31:03"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":null}]
2025-03-14 19:31:03,140 [http-nio-auto-3-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Entering UserServiceImpl.create with arguments: [{"id":null,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:03","lastUpdatedAt":"2025-03-14 19:31:03"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":null}]
Hibernate: 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.document,
        u1_0.email,
        u1_0.entity_id,
        u1_0.has_assigned_parking,
        u1_0.last_name,
        u1_0.name,
        u1_0.password,
        u1_0.phone_number,
        u1_0.type,
        u1_0.unit,
        u1_0.visit_date_time 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    insert 
    into
        users
        (created_at, document, email, entity_id, has_assigned_parking, last_name, name, password, phone_number, type, unit, visit_date_time, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-03-14 19:31:03,143 [http-nio-auto-3-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting UserServiceImpl.create with result: {"id":1,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:03","lastUpdatedAt":"2025-03-14 19:31:03"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":"2025-03-14 19:31:03"}
2025-03-14 19:31:03,144 [http-nio-auto-3-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting UserControllerImpl.save with result: {"headers":{},"body":{"id":1,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:03","lastUpdatedAt":"2025-03-14 19:31:03"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":"2025-03-14 19:31:03"},"statusCode":"OK","statusCodeValue":200}
Hibernate: 
    insert 
    into
        vehicles
        (created_at, plate, user_id, vehicle_type, id) 
    values
        (?, ?, ?, ?, default)
Hibernate: 
    select
        v1_0.id,
        v1_0.created_at,
        v1_0.plate,
        v1_0.user_id,
        v1_0.vehicle_type 
    from
        vehicles v1_0 
    left join
        users u1_0 
            on u1_0.id=v1_0.user_id 
    left join
        entities e1_0 
            on e1_0.id=u1_0.entity_id 
    where
        e1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.document,
        u1_0.email,
        u1_0.entity_id,
        u1_0.has_assigned_parking,
        u1_0.last_name,
        u1_0.name,
        u1_0.password,
        u1_0.phone_number,
        u1_0.type,
        u1_0.unit,
        u1_0.visit_date_time 
    from
        users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        e1_0.id,
        e1_0.active,
        e1_0.address,
        e1_0.city,
        e1_0.commune,
        e1_0.contact_phone,
        e1_0.created_at,
        e1_0.last_updated_at,
        e1_0.name,
        e1_0.parking_hours_allowed,
        e1_0.region,
        e1_0.sync_interval_minutes,
        e1_0.tax_id,
        e1_0.type,
        e1_0.visit_size_limit 
    from
        entities e1_0 
    where
        e1_0.id=?
2025-03-14 19:31:03,253 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-03-14 19:31:03,253 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-3-42367"]
2025-03-14 19:31:03,254 [tomcat-shutdown] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-03-14 19:31:03,254 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-3"]
2025-03-14 19:31:03,255 [Test worker] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
Hibernate: 
    drop table if exists entities cascade 
Hibernate: 
    drop table if exists events cascade 
Hibernate: 
    drop table if exists parking cascade 
Hibernate: 
    drop table if exists pocs cascade 
Hibernate: 
    drop table if exists users cascade 
Hibernate: 
    drop table if exists vehicles cascade 
2025-03-14 19:31:03,256 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-03-14 19:31:03,257 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
19:31:03,266 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - Processing appender named [MASKED_CONSOLE]
19:31:03,266 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
19:31:03,266 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - BEWARE: Writing to the console can be very slow. Avoid logging to the 
19:31:03,266 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - console in production environments, especially in high volume systems.
19:31:03,266 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - See also https://logback.qos.ch/codes.html#slowConsole
19:31:03,266 |-WARN in ch.qos.logback.core.model.processor.AppenderModelHandler - Appender named [JSON_CONSOLE] not referenced. Skipping further processing.
19:31:03,266 |-INFO in ch.qos.logback.classic.model.processor.RootLoggerModelHandler - Setting level of ROOT logger to INFO
19:31:03,266 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@6e1b56ad - Propagating INFO level on Logger[ROOT] onto the JUL framework
19:31:03,266 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [MASKED_CONSOLE] to Logger[ROOT]
19:31:03,266 |-INFO in ch.qos.logback.core.model.processor.DefaultProcessor@4e2842c - End of configuration.
19:31:03,266 |-INFO in org.springframework.boot.logging.logback.SpringBootJoranConfigurator@40bb73ff - Registering current configuration as safe fallback point


  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.4.3)

2025-03-14 19:31:03,268 [Test worker] INFO  com.visp.gate_command.integration.VehicleIntegrationTest - Starting VehicleIntegrationTest using Java 21.0.6 with PID 76927 (started by emilio in /home/emilio/repos/gate-command)
2025-03-14 19:31:03,268 [Test worker] DEBUG com.visp.gate_command.integration.VehicleIntegrationTest - Running with Spring Boot v3.4.3, Spring v6.2.3
2025-03-14 19:31:03,268 [Test worker] INFO  com.visp.gate_command.integration.VehicleIntegrationTest - The following 1 profile is active: "intTest"
2025-03-14 19:31:03,309 [Test worker] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-14 19:31:03,315 [Test worker] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 6 JPA repository interfaces.
2025-03-14 19:31:03,358 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 0 (http)
2025-03-14 19:31:03,359 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-4"]
2025-03-14 19:31:03,359 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-03-14 19:31:03,359 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.36]
2025-03-14 19:31:03,364 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-14 19:31:03,364 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 96 ms
2025-03-14 19:31:03,376 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-03-14 19:31:03,377 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection conn30: url=jdbc:h2:mem:testdb user=SA
2025-03-14 19:31:03,377 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-03-14 19:31:03,378 [Test worker] INFO  liquibase.database - Set default schema name to PUBLIC
2025-03-14 19:31:03,400 [Test worker] INFO  liquibase.changelog - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2025-03-14 19:31:03,401 [Test worker] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-03-14 19:31:03,409 [Test worker] INFO  liquibase.lockservice - Successfully acquired change log lock
2025-03-14 19:31:03,409 [Test worker] INFO  liquibase.command - Using deploymentId: 1991463409
2025-03-14 19:31:03,409 [Test worker] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-03-14 19:31:03,412 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-entities-table.xml::1::your-name
2025-03-14 19:31:03,413 [Test worker] INFO  liquibase.changelog - Table entities created
2025-03-14 19:31:03,413 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-entities-table.xml::1::your-name ran successfully in 1ms
2025-03-14 19:31:03,415 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-users-table.xml::2::your-name
2025-03-14 19:31:03,416 [Test worker] INFO  liquibase.changelog - Table users created
2025-03-14 19:31:03,416 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-users-table.xml::2::your-name ran successfully in 1ms
2025-03-14 19:31:03,417 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-vehicles-table.xml::3::your-name
2025-03-14 19:31:03,418 [Test worker] INFO  liquibase.changelog - Table vehicles created
2025-03-14 19:31:03,418 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-vehicles-table.xml::3::your-name ran successfully in 1ms
2025-03-14 19:31:03,419 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-parking-table.xml::4::your-name
2025-03-14 19:31:03,420 [Test worker] INFO  liquibase.changelog - Table parking created
2025-03-14 19:31:03,420 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-parking-table.xml::4::your-name ran successfully in 1ms
2025-03-14 19:31:03,420 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-pocs-table.xml::6::your-name
2025-03-14 19:31:03,422 [Test worker] INFO  liquibase.changelog - Table pocs created
2025-03-14 19:31:03,422 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-pocs-table.xml::6::your-name ran successfully in 1ms
2025-03-14 19:31:03,423 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-events-table.xml::7::your-name
2025-03-14 19:31:03,424 [Test worker] INFO  liquibase.changelog - Table events created
2025-03-14 19:31:03,424 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-events-table.xml::7::your-name ran successfully in 1ms
2025-03-14 19:31:03,424 [Test worker] INFO  liquibase.util - UPDATE SUMMARY
2025-03-14 19:31:03,424 [Test worker] INFO  liquibase.util - Run:                          6
2025-03-14 19:31:03,424 [Test worker] INFO  liquibase.util - Previously run:               0
2025-03-14 19:31:03,424 [Test worker] INFO  liquibase.util - Filtered out:                 0
2025-03-14 19:31:03,424 [Test worker] INFO  liquibase.util - -------------------------------
2025-03-14 19:31:03,424 [Test worker] INFO  liquibase.util - Total change sets:            6
2025-03-14 19:31:03,424 [Test worker] INFO  liquibase.util - Update summary generated
2025-03-14 19:31:03,424 [Test worker] INFO  liquibase.command - Update command completed successfully.
2025-03-14 19:31:03,424 [Test worker] INFO  liquibase.ui - Liquibase: Update has been successful. Rows affected: 6
2025-03-14 19:31:03,425 [Test worker] INFO  liquibase.lockservice - Successfully released change log lock
2025-03-14 19:31:03,425 [Test worker] INFO  liquibase.command - Command execution complete
2025-03-14 19:31:03,434 [Test worker] INFO  org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-14 19:31:03,435 [Test worker] INFO  org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-14 19:31:03,438 [Test worker] INFO  org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-14 19:31:03,439 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-14 19:31:03,439 [Test worker] INFO  org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-4)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-03-14 19:31:03,479 [Test worker] INFO  org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    drop table if exists entities cascade 
Hibernate: 
    drop table if exists events cascade 
Hibernate: 
    drop table if exists parking cascade 
Hibernate: 
    drop table if exists pocs cascade 
Hibernate: 
    drop table if exists users cascade 
Hibernate: 
    drop table if exists vehicles cascade 
Hibernate: 
    create table entities (
        active boolean not null,
        parking_hours_allowed integer not null,
        sync_interval_minutes integer not null,
        visit_size_limit integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_updated_at timestamp(6) not null,
        address varchar(255) not null,
        city varchar(255) not null,
        commune varchar(255) not null,
        contact_phone varchar(255) not null,
        name varchar(255) not null,
        region varchar(255) not null,
        tax_id varchar(255) not null,
        type varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table events (
        type tinyint not null check (type between 0 and 1),
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        poc_id bigint not null,
        plate varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table parking (
        available boolean not null,
        is_for_visit boolean not null,
        created_at timestamp(6) not null,
        expiration_date timestamp(6),
        id bigint generated by default as identity,
        user_id bigint not null,
        identifier varchar(255) not null,
        primary key (id),
        unique (identifier)
    )
Hibernate: 
    create table pocs (
        active boolean not null,
        type tinyint not null check (type between 0 and 1),
        created_at timestamp(6) not null,
        entity_id bigint not null,
        id bigint generated by default as identity,
        last_sync timestamp(6) not null,
        identifier varchar(255) not null unique,
        location varchar(255) not null,
        name varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table users (
        has_assigned_parking boolean not null,
        type tinyint not null check (type between 0 and 4),
        created_at timestamp(6) not null,
        entity_id bigint not null,
        id bigint generated by default as identity,
        visit_date_time timestamp(6),
        document varchar(255) not null,
        email varchar(255) not null unique,
        last_name varchar(255) not null,
        name varchar(255) not null,
        password varchar(255) not null,
        phone_number varchar(255) not null,
        unit varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table vehicles (
        vehicle_type tinyint not null check (vehicle_type between 0 and 1),
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        plate varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    alter table if exists events 
       add constraint FKn5eht9xulbljxwxl1cfrsxyh6 
       foreign key (poc_id) 
       references pocs
Hibernate: 
    alter table if exists parking 
       add constraint FKem4wiv4ye122xiq7r7eny90v8 
       foreign key (user_id) 
       references users
Hibernate: 
    alter table if exists pocs 
       add constraint FKcwolwrishvr7h658htihn5xbu 
       foreign key (entity_id) 
       references entities
Hibernate: 
    alter table if exists users 
       add constraint FKhb1q1fcncex0uvlxs3h7vjofc 
       foreign key (entity_id) 
       references entities
Hibernate: 
    alter table if exists vehicles 
       add constraint FKo4u5y92lt2sx8y2dc1bb9sewc 
       foreign key (user_id) 
       references users
2025-03-14 19:31:03,485 [Test worker] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-14 19:31:03,535 [Test worker] WARN  org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-14 19:31:03,586 [Test worker] INFO  org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-03-14 19:31:03,665 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-4"]
2025-03-14 19:31:03,666 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 45941 (http) with context path '/'
2025-03-14 19:31:03,667 [Test worker] INFO  com.visp.gate_command.integration.VehicleIntegrationTest - Started VehicleIntegrationTest in 0.408 seconds (process running for 5.715)
2025-03-14 19:31:03,674 [http-nio-auto-4-exec-1] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-14 19:31:03,674 [http-nio-auto-4-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-14 19:31:03,674 [http-nio-auto-4-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-03-14 19:31:03,764 [http-nio-auto-4-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Entering EntityControllerImpl.save with arguments: [{"id":null,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":null,"lastUpdatedAt":null}]
2025-03-14 19:31:03,764 [http-nio-auto-4-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Entering EntityServiceImpl.create with arguments: [{"id":null,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":null,"lastUpdatedAt":null}]
Hibernate: 
    insert 
    into
        entities
        (active, address, city, commune, contact_phone, created_at, last_updated_at, name, parking_hours_allowed, region, sync_interval_minutes, tax_id, type, visit_size_limit, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-03-14 19:31:03,767 [http-nio-auto-4-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting EntityServiceImpl.create with result: {"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:03","lastUpdatedAt":"2025-03-14 19:31:03"}
2025-03-14 19:31:03,768 [http-nio-auto-4-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting EntityControllerImpl.save with result: {"headers":{},"body":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:03","lastUpdatedAt":"2025-03-14 19:31:03"},"statusCode":"OK","statusCodeValue":200}
2025-03-14 19:31:03,819 [http-nio-auto-4-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Entering UserControllerImpl.save with arguments: [{"id":null,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:03","lastUpdatedAt":"2025-03-14 19:31:03"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":null}]
2025-03-14 19:31:03,819 [http-nio-auto-4-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Entering UserServiceImpl.create with arguments: [{"id":null,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:03","lastUpdatedAt":"2025-03-14 19:31:03"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":null}]
Hibernate: 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.document,
        u1_0.email,
        u1_0.entity_id,
        u1_0.has_assigned_parking,
        u1_0.last_name,
        u1_0.name,
        u1_0.password,
        u1_0.phone_number,
        u1_0.type,
        u1_0.unit,
        u1_0.visit_date_time 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    insert 
    into
        users
        (created_at, document, email, entity_id, has_assigned_parking, last_name, name, password, phone_number, type, unit, visit_date_time, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-03-14 19:31:03,823 [http-nio-auto-4-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting UserServiceImpl.create with result: {"id":1,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:03","lastUpdatedAt":"2025-03-14 19:31:03"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":"2025-03-14 19:31:03"}
2025-03-14 19:31:03,823 [http-nio-auto-4-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting UserControllerImpl.save with result: {"headers":{},"body":{"id":1,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:03","lastUpdatedAt":"2025-03-14 19:31:03"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":"2025-03-14 19:31:03"},"statusCode":"OK","statusCodeValue":200}
Hibernate: 
    insert 
    into
        vehicles
        (created_at, plate, user_id, vehicle_type, id) 
    values
        (?, ?, ?, ?, default)
Hibernate: 
    select
        v1_0.id,
        v1_0.created_at,
        v1_0.plate,
        v1_0.user_id,
        v1_0.vehicle_type 
    from
        vehicles v1_0 
    where
        v1_0.id=?
Hibernate: 
    update
        vehicles 
    set
        plate=?,
        user_id=?,
        vehicle_type=? 
    where
        id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.document,
        u1_0.email,
        u1_0.entity_id,
        u1_0.has_assigned_parking,
        u1_0.last_name,
        u1_0.name,
        u1_0.password,
        u1_0.phone_number,
        u1_0.type,
        u1_0.unit,
        u1_0.visit_date_time 
    from
        users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        e1_0.id,
        e1_0.active,
        e1_0.address,
        e1_0.city,
        e1_0.commune,
        e1_0.contact_phone,
        e1_0.created_at,
        e1_0.last_updated_at,
        e1_0.name,
        e1_0.parking_hours_allowed,
        e1_0.region,
        e1_0.sync_interval_minutes,
        e1_0.tax_id,
        e1_0.type,
        e1_0.visit_size_limit 
    from
        entities e1_0 
    where
        e1_0.id=?
2025-03-14 19:31:03,936 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-03-14 19:31:03,936 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-4-45941"]
2025-03-14 19:31:03,936 [tomcat-shutdown] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-03-14 19:31:03,937 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-4"]
2025-03-14 19:31:03,938 [Test worker] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
Hibernate: 
    drop table if exists entities cascade 
Hibernate: 
    drop table if exists events cascade 
Hibernate: 
    drop table if exists parking cascade 
Hibernate: 
    drop table if exists pocs cascade 
Hibernate: 
    drop table if exists users cascade 
Hibernate: 
    drop table if exists vehicles cascade 
2025-03-14 19:31:03,939 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-03-14 19:31:03,939 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
19:31:03,948 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - Processing appender named [MASKED_CONSOLE]
19:31:03,948 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
19:31:03,948 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - BEWARE: Writing to the console can be very slow. Avoid logging to the 
19:31:03,948 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - console in production environments, especially in high volume systems.
19:31:03,948 |-INFO in ch.qos.logback.core.ConsoleAppender[MASKED_CONSOLE] - See also https://logback.qos.ch/codes.html#slowConsole
19:31:03,948 |-WARN in ch.qos.logback.core.model.processor.AppenderModelHandler - Appender named [JSON_CONSOLE] not referenced. Skipping further processing.
19:31:03,948 |-INFO in ch.qos.logback.classic.model.processor.RootLoggerModelHandler - Setting level of ROOT logger to INFO
19:31:03,948 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@7809027c - Propagating INFO level on Logger[ROOT] onto the JUL framework
19:31:03,948 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [MASKED_CONSOLE] to Logger[ROOT]
19:31:03,948 |-INFO in ch.qos.logback.core.model.processor.DefaultProcessor@1b5a8687 - End of configuration.
19:31:03,948 |-INFO in org.springframework.boot.logging.logback.SpringBootJoranConfigurator@311d3cab - Registering current configuration as safe fallback point


  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.4.3)

2025-03-14 19:31:03,949 [Test worker] INFO  com.visp.gate_command.integration.VehicleIntegrationTest - Starting VehicleIntegrationTest using Java 21.0.6 with PID 76927 (started by emilio in /home/emilio/repos/gate-command)
2025-03-14 19:31:03,949 [Test worker] DEBUG com.visp.gate_command.integration.VehicleIntegrationTest - Running with Spring Boot v3.4.3, Spring v6.2.3
2025-03-14 19:31:03,949 [Test worker] INFO  com.visp.gate_command.integration.VehicleIntegrationTest - The following 1 profile is active: "intTest"
2025-03-14 19:31:03,981 [Test worker] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-14 19:31:03,986 [Test worker] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 6 JPA repository interfaces.
2025-03-14 19:31:04,022 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 0 (http)
2025-03-14 19:31:04,022 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-5"]
2025-03-14 19:31:04,022 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-03-14 19:31:04,022 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.36]
2025-03-14 19:31:04,027 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-14 19:31:04,027 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 77 ms
2025-03-14 19:31:04,036 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-03-14 19:31:04,037 [Test worker] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection conn40: url=jdbc:h2:mem:testdb user=SA
2025-03-14 19:31:04,037 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2025-03-14 19:31:04,037 [Test worker] INFO  liquibase.database - Set default schema name to PUBLIC
2025-03-14 19:31:04,056 [Test worker] INFO  liquibase.changelog - Creating database history table with name: PUBLIC.DATABASECHANGELOG
2025-03-14 19:31:04,057 [Test worker] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-03-14 19:31:04,063 [Test worker] INFO  liquibase.lockservice - Successfully acquired change log lock
2025-03-14 19:31:04,063 [Test worker] INFO  liquibase.command - Using deploymentId: 1991464063
2025-03-14 19:31:04,063 [Test worker] INFO  liquibase.changelog - Reading from PUBLIC.DATABASECHANGELOG
2025-03-14 19:31:04,065 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-entities-table.xml::1::your-name
2025-03-14 19:31:04,066 [Test worker] INFO  liquibase.changelog - Table entities created
2025-03-14 19:31:04,067 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-entities-table.xml::1::your-name ran successfully in 2ms
2025-03-14 19:31:04,068 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-users-table.xml::2::your-name
2025-03-14 19:31:04,069 [Test worker] INFO  liquibase.changelog - Table users created
2025-03-14 19:31:04,069 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-users-table.xml::2::your-name ran successfully in 1ms
2025-03-14 19:31:04,069 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-vehicles-table.xml::3::your-name
2025-03-14 19:31:04,070 [Test worker] INFO  liquibase.changelog - Table vehicles created
2025-03-14 19:31:04,070 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-vehicles-table.xml::3::your-name ran successfully in 1ms
2025-03-14 19:31:04,070 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-parking-table.xml::4::your-name
2025-03-14 19:31:04,071 [Test worker] INFO  liquibase.changelog - Table parking created
2025-03-14 19:31:04,071 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-parking-table.xml::4::your-name ran successfully in 1ms
2025-03-14 19:31:04,072 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-pocs-table.xml::6::your-name
2025-03-14 19:31:04,073 [Test worker] INFO  liquibase.changelog - Table pocs created
2025-03-14 19:31:04,073 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-pocs-table.xml::6::your-name ran successfully in 1ms
2025-03-14 19:31:04,074 [Test worker] INFO  liquibase.ui - Running Changeset: liquibase/changes/create-events-table.xml::7::your-name
2025-03-14 19:31:04,075 [Test worker] INFO  liquibase.changelog - Table events created
2025-03-14 19:31:04,075 [Test worker] INFO  liquibase.changelog - ChangeSet liquibase/changes/create-events-table.xml::7::your-name ran successfully in 1ms
2025-03-14 19:31:04,076 [Test worker] INFO  liquibase.util - UPDATE SUMMARY
2025-03-14 19:31:04,076 [Test worker] INFO  liquibase.util - Run:                          6
2025-03-14 19:31:04,076 [Test worker] INFO  liquibase.util - Previously run:               0
2025-03-14 19:31:04,076 [Test worker] INFO  liquibase.util - Filtered out:                 0
2025-03-14 19:31:04,076 [Test worker] INFO  liquibase.util - -------------------------------
2025-03-14 19:31:04,076 [Test worker] INFO  liquibase.util - Total change sets:            6
2025-03-14 19:31:04,076 [Test worker] INFO  liquibase.util - Update summary generated
2025-03-14 19:31:04,076 [Test worker] INFO  liquibase.command - Update command completed successfully.
2025-03-14 19:31:04,076 [Test worker] INFO  liquibase.ui - Liquibase: Update has been successful. Rows affected: 6
2025-03-14 19:31:04,076 [Test worker] INFO  liquibase.lockservice - Successfully released change log lock
2025-03-14 19:31:04,076 [Test worker] INFO  liquibase.command - Command execution complete
2025-03-14 19:31:04,084 [Test worker] INFO  org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-14 19:31:04,085 [Test worker] INFO  org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-03-14 19:31:04,087 [Test worker] INFO  org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-14 19:31:04,088 [Test worker] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-03-14 19:31:04,088 [Test worker] INFO  org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-5)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-03-14 19:31:04,126 [Test worker] INFO  org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    drop table if exists entities cascade 
Hibernate: 
    drop table if exists events cascade 
Hibernate: 
    drop table if exists parking cascade 
Hibernate: 
    drop table if exists pocs cascade 
Hibernate: 
    drop table if exists users cascade 
Hibernate: 
    drop table if exists vehicles cascade 
Hibernate: 
    create table entities (
        active boolean not null,
        parking_hours_allowed integer not null,
        sync_interval_minutes integer not null,
        visit_size_limit integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_updated_at timestamp(6) not null,
        address varchar(255) not null,
        city varchar(255) not null,
        commune varchar(255) not null,
        contact_phone varchar(255) not null,
        name varchar(255) not null,
        region varchar(255) not null,
        tax_id varchar(255) not null,
        type varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table events (
        type tinyint not null check (type between 0 and 1),
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        poc_id bigint not null,
        plate varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table parking (
        available boolean not null,
        is_for_visit boolean not null,
        created_at timestamp(6) not null,
        expiration_date timestamp(6),
        id bigint generated by default as identity,
        user_id bigint not null,
        identifier varchar(255) not null,
        primary key (id),
        unique (identifier)
    )
Hibernate: 
    create table pocs (
        active boolean not null,
        type tinyint not null check (type between 0 and 1),
        created_at timestamp(6) not null,
        entity_id bigint not null,
        id bigint generated by default as identity,
        last_sync timestamp(6) not null,
        identifier varchar(255) not null unique,
        location varchar(255) not null,
        name varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table users (
        has_assigned_parking boolean not null,
        type tinyint not null check (type between 0 and 4),
        created_at timestamp(6) not null,
        entity_id bigint not null,
        id bigint generated by default as identity,
        visit_date_time timestamp(6),
        document varchar(255) not null,
        email varchar(255) not null unique,
        last_name varchar(255) not null,
        name varchar(255) not null,
        password varchar(255) not null,
        phone_number varchar(255) not null,
        unit varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table vehicles (
        vehicle_type tinyint not null check (vehicle_type between 0 and 1),
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        plate varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    alter table if exists events 
       add constraint FKn5eht9xulbljxwxl1cfrsxyh6 
       foreign key (poc_id) 
       references pocs
Hibernate: 
    alter table if exists parking 
       add constraint FKem4wiv4ye122xiq7r7eny90v8 
       foreign key (user_id) 
       references users
Hibernate: 
    alter table if exists pocs 
       add constraint FKcwolwrishvr7h658htihn5xbu 
       foreign key (entity_id) 
       references entities
Hibernate: 
    alter table if exists users 
       add constraint FKhb1q1fcncex0uvlxs3h7vjofc 
       foreign key (entity_id) 
       references entities
Hibernate: 
    alter table if exists vehicles 
       add constraint FKo4u5y92lt2sx8y2dc1bb9sewc 
       foreign key (user_id) 
       references users
2025-03-14 19:31:04,132 [Test worker] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-14 19:31:04,176 [Test worker] WARN  org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-14 19:31:04,226 [Test worker] INFO  org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2025-03-14 19:31:04,292 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-5"]
2025-03-14 19:31:04,297 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 33939 (http) with context path '/'
2025-03-14 19:31:04,298 [Test worker] INFO  com.visp.gate_command.integration.VehicleIntegrationTest - Started VehicleIntegrationTest in 0.357 seconds (process running for 6.345)
2025-03-14 19:31:04,305 [http-nio-auto-5-exec-1] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-14 19:31:04,305 [http-nio-auto-5-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-14 19:31:04,305 [http-nio-auto-5-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-03-14 19:31:04,394 [http-nio-auto-5-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Entering EntityControllerImpl.save with arguments: [{"id":null,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":null,"lastUpdatedAt":null}]
2025-03-14 19:31:04,394 [http-nio-auto-5-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Entering EntityServiceImpl.create with arguments: [{"id":null,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":null,"lastUpdatedAt":null}]
Hibernate: 
    insert 
    into
        entities
        (active, address, city, commune, contact_phone, created_at, last_updated_at, name, parking_hours_allowed, region, sync_interval_minutes, tax_id, type, visit_size_limit, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-03-14 19:31:04,397 [http-nio-auto-5-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting EntityServiceImpl.create with result: {"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:04","lastUpdatedAt":"2025-03-14 19:31:04"}
2025-03-14 19:31:04,398 [http-nio-auto-5-exec-1] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting EntityControllerImpl.save with result: {"headers":{},"body":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:04","lastUpdatedAt":"2025-03-14 19:31:04"},"statusCode":"OK","statusCodeValue":200}
2025-03-14 19:31:04,449 [http-nio-auto-5-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Entering UserControllerImpl.save with arguments: [{"id":null,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:04","lastUpdatedAt":"2025-03-14 19:31:04"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":null}]
2025-03-14 19:31:04,449 [http-nio-auto-5-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Entering UserServiceImpl.create with arguments: [{"id":null,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:04","lastUpdatedAt":"2025-03-14 19:31:04"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":null}]
Hibernate: 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.document,
        u1_0.email,
        u1_0.entity_id,
        u1_0.has_assigned_parking,
        u1_0.last_name,
        u1_0.name,
        u1_0.password,
        u1_0.phone_number,
        u1_0.type,
        u1_0.unit,
        u1_0.visit_date_time 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    insert 
    into
        users
        (created_at, document, email, entity_id, has_assigned_parking, last_name, name, password, phone_number, type, unit, visit_date_time, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-03-14 19:31:04,452 [http-nio-auto-5-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting UserServiceImpl.create with result: {"id":1,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:04","lastUpdatedAt":"2025-03-14 19:31:04"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":"2025-03-14 19:31:04"}
2025-03-14 19:31:04,452 [http-nio-auto-5-exec-2] INFO  com.visp.gate_command.aop.LoggingAspect - Exiting UserControllerImpl.save with result: {"headers":{},"body":{"id":1,"document":"12345678-9","name":"John","lastName":"Doe","phoneNumber":"phoneNumber","email":"john.doe@example.com","password":"password","unit":"108","type":"RESIDENT","entity":{"id":1,"name":"name","type":"type","*****":"*****","region":"region","city":"city","commune":"commune","taxId":"*****","*****":"*****","syncIntervalMinutes":5,"parkingHoursAllowed":5,"visitSizeLimit":40,"active":true,"createdAt":"2025-03-14 19:31:04","lastUpdatedAt":"2025-03-14 19:31:04"},"hasAssignedParking":false,"visitDateTime":null,"createdAt":"2025-03-14 19:31:04"},"statusCode":"OK","statusCodeValue":200}
Hibernate: 
    insert 
    into
        vehicles
        (created_at, plate, user_id, vehicle_type, id) 
    values
        (?, ?, ?, ?, default)
Hibernate: 
    select
        v1_0.id,
        v1_0.created_at,
        v1_0.plate,
        v1_0.user_id,
        v1_0.vehicle_type 
    from
        vehicles v1_0 
    where
        v1_0.id=?
Hibernate: 
    delete 
    from
        vehicles 
    where
        id=?
2025-03-14 19:31:04,553 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-03-14 19:31:04,553 [tomcat-shutdown] INFO  org.apache.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-5-33939"]
2025-03-14 19:31:04,554 [tomcat-shutdown] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-03-14 19:31:04,554 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-5"]
2025-03-14 19:31:04,554 [Test worker] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
Hibernate: 
    drop table if exists entities cascade 
Hibernate: 
    drop table if exists events cascade 
Hibernate: 
    drop table if exists parking cascade 
Hibernate: 
    drop table if exists pocs cascade 
Hibernate: 
    drop table if exists users cascade 
Hibernate: 
    drop table if exists vehicles cascade 
2025-03-14 19:31:04,555 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2025-03-14 19:31:04,556 [Test worker] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
]]></system-out>
  <system-err><![CDATA[Mockito is currently self-attaching to enable the inline-mock-maker. This will no longer work in future releases of the JDK. Please add Mockito as an agent to your build what is described in Mockito's documentation: https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#0.3
WARNING: A Java agent has been loaded dynamically (/home/emilio/.gradle/caches/modules-2/files-2.1/net.bytebuddy/byte-buddy-agent/1.15.11/a38b16385e867f59a641330f0362ebe742788ed8/byte-buddy-agent-1.15.11.jar)
WARNING: If a serviceability tool is in use, please run with -XX:+EnableDynamicAgentLoading to hide this warning
WARNING: If a serviceability tool is not in use, please run with -Djdk.instrument.traceUsage for more information
WARNING: Dynamic loading of agents will be disallowed by default in a future release
]]></system-err>
</testsuite>
